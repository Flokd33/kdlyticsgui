shadow$provide.module$node_modules$vega_util$build$vega_util=function(global$jscomp$0,require,module,exports$jscomp$0){(function(global,factory){"object"===typeof exports$jscomp$0&&"undefined"!==typeof module?factory(exports$jscomp$0):"function"===typeof define&&define.amd?define(["exports"],factory):(global=global||self,factory(global.vega={}))})(this,function(exports){function accessor(fn,fields,name){fn.fields=fields||[];fn.fname=name;return fn}function accessorFields(fn){return null==fn?null:
fn.fields}function error(message){throw Error(message);}function splitAccessPath(p){function push(){path.push(s+p.substring(i,j));s="";i=j+1}var path=[],q=null,b=0,n=p.length,s="",i,j;p+="";for(i=j=0;j<n;++j){var c=p[j];"\\"===c?(s+=p.substring(i,j),i=++j):c===q?(push(),q=null,b=-1):q||(i===b&&'"'===c?(i=j+1,q=c):i===b&&"'"===c?(i=j+1,q=c):"."!==c||b?"["===c?(j>i&&push(),b=i=j+1):"]"===c&&(b||error("Access path missing open bracket: "+p),0<b&&push(),b=0,i=j+1):j>i?push():i=j+1)}b&&error("Access path missing closing bracket: "+
p);q&&error("Access path missing closing quote: "+p);j>i&&(j++,push());return path}function isObject(_){return _===Object(_)}function isString(_){return"string"===typeof _}function $(x){return isArray(x)?"["+x.map($)+"]":isObject(x)||isString(x)?JSON.stringify(x).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):x}function field(field,name){var path=splitAccessPath(field),code="return _["+path.map($).join("][")+"];";return accessor(Function("_",code),[field=1===path.length?path[0]:field],name||
field)}function log(method,level,input){level=[level].concat([].slice.call(input));console[method].apply(console,level)}function writeConfig(output,key,value,recurse){var k;if(isObject(value)&&!isArray(value))for(k in output=isObject(output[key])?output[key]:output[key]={},value)recurse&&(!0===recurse||recurse[k])?writeConfig(output,k,value[k]):output[k]=value[k];else output[key]=value}function mergeNamed(a,b){function add(_){map[_.name]||(map[_.name]=1,out.push(_))}if(null==a)return b;var map={},
out=[];b.forEach(add);a.forEach(add);return out}function peek(array){return array[array.length-1]}function toNumber(_){return null==_||""===_?null:+_}function exp(sign){return function(x){return sign*Math.exp(x)}}function log$1(sign){return function(x){return Math.log(sign*x)}}function symlog(c){return function(x){return Math.sign(x)*Math.log1p(Math.abs(x/c))}}function symexp(c){return function(x){return Math.sign(x)*Math.expm1(Math.abs(x))*c}}function pow(exponent){return function(x){return 0>x?
-Math.pow(-x,exponent):Math.pow(x,exponent)}}function pan(domain,delta,lift,ground){var d0=lift(domain[0]);domain=lift(peek(domain));delta*=domain-d0;return[ground(d0-delta),ground(domain-delta)]}function zoom(domain,anchor,scale,lift,ground){var d0=lift(domain[0]);domain=lift(peek(domain));anchor=null!=anchor?lift(anchor):(d0+domain)/2;return[ground(anchor+(d0-anchor)*scale),ground(anchor+(domain-anchor)*scale)]}function array$jscomp$0(_){return null!=_?isArray(_)?_:[_]:[]}function isFunction(_){return"function"===
typeof _}function hasOwnProperty(object,property){return hop.call(object,property)}function isDate(_){return"[object Date]"===Object.prototype.toString.call(_)}function isNumber(_){return"number"===typeof _}function repeat(str,reps){for(var s="";0<=--reps;)s+=str;return s}function defaultParser(_){return isNumber(_)?_:isDate(_)?_:Date.parse(_)}var isArray=Array.isArray,empty=[],id=field("id"),identity=accessor(function(_){return _},empty,"identity"),zero=accessor(function(){return 0},empty,"zero"),
one=accessor(function(){return 1},empty,"one"),truthy=accessor(function(){return!0},empty,"true");empty=accessor(function(){return!1},empty,"false");var hop=Object.prototype.hasOwnProperty,NULL={};exports.Debug=4;exports.Error=1;exports.Info=3;exports.None=0;exports.Warn=2;exports.accessor=accessor;exports.accessorFields=accessorFields;exports.accessorName=function(fn){return null==fn?null:fn.fname};exports.array=array$jscomp$0;exports.clampRange=function(range,min,max){var lo=range[0];range=range[1];
if(range<lo){var span=range;range=lo;lo=span}span=range-lo;return span>=max-min?[min,max]:[lo=Math.min(Math.max(lo,min),max-span),lo+span]};exports.compare=function(fields,orders){var idx=[],cmp=(fields=array$jscomp$0(fields)).map(function(f,i){if(null==f)return null;idx.push(i);return isFunction(f)?f:splitAccessPath(f).map($).join("][")}),n=idx.length-1;orders=array$jscomp$0(orders);var code="var u,v;return ",j,t;if(0>n)return null;for(j=0;j<=n;++j){var i$jscomp$0=idx[j];var f$jscomp$0=cmp[i$jscomp$0];
if(isFunction(f$jscomp$0)){var d="f"+i$jscomp$0;var u="(u\x3dthis."+d+"(a))";var v="(v\x3dthis."+d+"(b))";(t=t||{})[d]=f$jscomp$0}else u="(u\x3da["+f$jscomp$0+"])",v="(v\x3db["+f$jscomp$0+"])";d="((v\x3dv instanceof Date?+v:v),(u\x3du instanceof Date?+u:u))";if("descending"!==orders[i$jscomp$0]){var gt=1;f$jscomp$0=-1}else gt=-1,f$jscomp$0=1;code+="("+u+"\x3c"+v+"||u\x3d\x3dnull)\x26\x26v!\x3dnull?"+f$jscomp$0+":(u\x3ev||v\x3d\x3dnull)\x26\x26u!\x3dnull?"+gt+":"+d+"!\x3d\x3du\x26\x26v\x3d\x3d\x3dv?"+
f$jscomp$0+":v!\x3d\x3dv\x26\x26u\x3d\x3d\x3du?"+gt+(i$jscomp$0<n?":":":0")}f$jscomp$0=Function("a","b",code+";");t&&(f$jscomp$0=f$jscomp$0.bind(t));fields=fields.reduce(function(map,field){isFunction(field)?(accessorFields(field)||[]).forEach(function(_){map[_]=1}):null!=field&&(map[field+""]=1);return map},{});return accessor(f$jscomp$0,Object.keys(fields))};exports.constant=function(_){return isFunction(_)?_:function(){return _}};exports.debounce=function(delay,handler){function callback(){handler(evt);
tid=evt=null}var tid,evt;return function(e){evt=e;tid&&clearTimeout(tid);tid=setTimeout(callback,delay)}};exports.error=error;exports.extend=function(_){for(var x,k,i=1,len=arguments.length;i<len;++i)for(k in x=arguments[i],x)_[k]=x[k];return _};exports.extent=function(array,f){var i=0,n,v,min,max;if(array&&(n=array.length))if(null==f){for(v=array[i];null==v||v!==v;v=array[++i]);for(min=max=v;i<n;++i)v=array[i],null!=v&&(v<min&&(min=v),v>max&&(max=v))}else{for(v=f(array[i]);null==v||v!==v;v=f(array[++i]));
for(min=max=v;i<n;++i)v=f(array[i]),null!=v&&(v<min&&(min=v),v>max&&(max=v))}return[min,max]};exports.extentIndex=function(array,f){var i=-1,n=array.length,c,u,v;if(null==f){for(;++i<n;){var b=array[i];if(null!=b&&b>=b){var a=c=b;break}}for(u=v=i;++i<n;)b=array[i],null!=b&&(a>b&&(a=b,u=i),c<b&&(c=b,v=i))}else{for(;++i<n;)if(b=f(array[i],i,array),null!=b&&b>=b){a=c=b;break}for(u=v=i;++i<n;)b=f(array[i],i,array),null!=b&&(a>b&&(a=b,u=i),c<b&&(c=b,v=i))}return[u,v]};exports.falsy=empty;exports.fastmap=
function(input){function has(key){return hasOwnProperty(obj,key)&&obj[key]!==NULL}var obj={},test;var map={size:0,empty:0,object:obj,has:has,get:function(key){return has(key)?obj[key]:void 0},set:function(key,value){has(key)||(++map.size,obj[key]===NULL&&--map.empty);obj[key]=value;return this},delete:function(key){has(key)&&(--map.size,++map.empty,obj[key]=NULL);return this},clear:function(){map.size=map.empty=0;map.object=obj={}},test:function(_){return arguments.length?(test=_,map):test},clean:function(){var next=
{},size=0,key;for(key in obj){var value=obj[key];value===NULL||test&&test(value)||(next[key]=value,++size)}map.size=size;map.empty=0;map.object=obj=next}};input&&Object.keys(input).forEach(function(key){map.set(key,input[key])});return map};exports.field=field;exports.flush=function(range,value,threshold,left,right,center){if(!threshold&&0!==threshold)return center;var a=range[0];range=peek(range);threshold=+threshold;if(range<a){var l=a;a=range;range=l}l=Math.abs(value-a);value=Math.abs(range-value);
return l<value&&l<=threshold?left:value<=threshold?right:center};exports.hasOwnProperty=hasOwnProperty;exports.id=id;exports.identity=identity;exports.inherits=function(child,parent){parent=child.prototype=Object.create(parent.prototype);parent.constructor=child;return parent};exports.inrange=function(value,range,left,right){var r0=range[0];range=range[range.length-1];if(r0>range){var t=r0;r0=range;range=t}return(void 0===left||left?r0<=value:r0<value)&&(void 0===right||right?value<=range:value<range)};
exports.isArray=isArray;exports.isBoolean=function(_){return"boolean"===typeof _};exports.isDate=isDate;exports.isFunction=isFunction;exports.isNumber=isNumber;exports.isObject=isObject;exports.isRegExp=function(_){return"[object RegExp]"===Object.prototype.toString.call(_)};exports.isString=isString;exports.key=function(fields,flat){fields&&(fields=flat?array$jscomp$0(fields).map(function(f){return f.replace(/\\(.)/g,"$1")}):array$jscomp$0(fields));var fn=fields&&fields.length?Function("_","return ''+"+
fields.map(function(f){return"_["+(flat?$(f):splitAccessPath(f).map($).join("]["))+"]"}).join("+'|'+")+";"):function(){return""};return accessor(fn,fields,"key")};exports.lerp=function(array,frac){var lo=array[0];array=peek(array);return(frac=+frac)?1===frac?array:lo+frac*(array-lo):lo};exports.logger=function(_$jscomp$0,method){var level=_$jscomp$0||0;return{level:function(_){return arguments.length?(level=+_,this):level},error:function(){1<=level&&log(method||"error","ERROR",arguments);return this},
warn:function(){2<=level&&log(method||"warn","WARN",arguments);return this},info:function(){3<=level&&log(method||"log","INFO",arguments);return this},debug:function(){4<=level&&log(method||"log","DEBUG",arguments);return this}}};exports.merge=function(compare,array0,array1,output){var n0=array0.length,n1=array1.length;if(!n1)return array0;if(!n0)return array1;output=output||new array0.constructor(n0+n1);for(var i0=0,i1=0,i=0;i0<n0&&i1<n1;++i)output[i]=0<compare(array0[i0],array1[i1])?array1[i1++]:
array0[i0++];for(;i0<n0;++i0,++i)output[i]=array0[i0];for(;i1<n1;++i1,++i)output[i]=array1[i1];return output};exports.mergeConfig=function(configs){for(var $jscomp$restParams=[],$jscomp$restIndex=0;$jscomp$restIndex<arguments.length;++$jscomp$restIndex)$jscomp$restParams[$jscomp$restIndex-0]=arguments[$jscomp$restIndex];return $jscomp$restParams.reduce(function(out,source){for(var key in source)"signals"===key?out.signals=mergeNamed(out.signals,source.signals):writeConfig(out,key,source[key],"legend"===
key?{layout:1}:"style"===key?!0:null);return out},{})};exports.one=one;exports.pad=function(str,length,padchar,align){padchar=padchar||" ";str+="";length-=str.length;return 0>=length?str:"left"===align?repeat(padchar,length)+str:"center"===align?repeat(padchar,~~(length/2))+str+repeat(padchar,Math.ceil(length/2)):str+repeat(padchar,length)};exports.panLinear=function(domain,delta){return pan(domain,delta,toNumber,identity)};exports.panLog=function(domain,delta){var sign=Math.sign(domain[0]);return pan(domain,
delta,log$1(sign),exp(sign))};exports.panPow=function(domain,delta,exponent){return pan(domain,delta,pow(exponent),pow(1/exponent))};exports.panSymlog=function(domain,delta,constant){return pan(domain,delta,symlog(constant),symexp(constant))};exports.peek=peek;exports.quarter=function(date){return 1+~~((new Date(date)).getMonth()/3)};exports.repeat=repeat;exports.span=function(array){return array&&peek(array)-array[0]||0};exports.splitAccessPath=splitAccessPath;exports.stringValue=$;exports.toBoolean=
function(_){return null==_||""===_?null:_&&"false"!==_&&"0"!==_?!!_:!1};exports.toDate=function(_,parser){parser=parser||defaultParser;return null==_||""===_?null:parser(_)};exports.toNumber=toNumber;exports.toSet=function(_){for(var s={},i=0,n=_.length;i<n;++i)s[_[i]]=!0;return s};exports.toString=function(_){return null==_||""===_?null:_+""};exports.truncate=function(str,length,align,ellipsis){ellipsis=null!=ellipsis?ellipsis:"â€¦";str+="";var n=str.length,l=Math.max(0,length-ellipsis.length);return n<=
length?str:"left"===align?ellipsis+str.slice(n-l):"center"===align?str.slice(0,Math.ceil(l/2))+ellipsis+str.slice(n-~~(l/2)):str.slice(0,l)+ellipsis};exports.truthy=truthy;exports.utcquarter=function(date){return 1+~~((new Date(date)).getUTCMonth()/3)};exports.visitArray=function(array,filter,visitor){if(array){var i=0,n=array.length,t;if(filter)for(;i<n;++i)(t=filter(array[i]))&&visitor(t,i,array);else array.forEach(visitor)}};exports.writeConfig=writeConfig;exports.zero=zero;exports.zoomLinear=
function(domain,anchor,scale){return zoom(domain,anchor,scale,toNumber,identity)};exports.zoomLog=function(domain,anchor,scale){var sign=Math.sign(domain[0]);return zoom(domain,anchor,scale,log$1(sign),exp(sign))};exports.zoomPow=function(domain,anchor,scale,exponent){return zoom(domain,anchor,scale,pow(exponent),pow(1/exponent))};exports.zoomSymlog=function(domain,anchor,scale,constant){return zoom(domain,anchor,scale,symlog(constant),symexp(constant))};Object.defineProperty(exports,"__esModule",
{value:!0})})}
//# sourceMappingURL=module$node_modules$vega_util$build$vega_util.js.map
