{"version":3,"sources":["kdlyticsgui/wealth.cljs"],"mappings":";AAYA,qCAAA,rCAAMA;AAAN,AACE,uBAAA,mFAAA,1GAACC;;AACD,WAAA,AAAAC,PAAMC,uBAAM,sDAAA,mFAAA,zIAACC;cAAb,mFAAA,2CAAA,wDAAA,cAAA,kDAAA,cAAA,2DAAA,qhBAAA,2CAAA,wDAAA,iBAAA,kDAAA,WAAA,2DAAA,opCAAA,2CAAA,wDAAA,aAAA,kDAAA,aAAA,2DAAA,x8EACMC,4ZAA4D,6DAAA,SAAA,SAAA,/EAACC,qFACD,6DAAA,OAAA,YAAA,hFAACA,sFACD,6DAAA,cAAA,cAAA,zFAACA,+FACD,6DAAA,OAAA,UAAA,9EAACA,oFACD,6DAAA,MAAA,WAAA,9EAACA,maACD,2DAAA,KAAA,WAAA,3EAACC,gFAA8BC,8BAC/B,2DAAA,MAAA,gBAAA,jFAACD,sFAAoCE,8BACrC,2DAAA,QAAA,qBAAA,xFAACF,6FAA2CE,8BAE5C,2DAAA,UAAA,YAAA,jFAACF,sFAAoCC,8BACrC,2DAAA,aAAA,UAAA,lFAACD,uFAAgCC,8BACjC,2DAAA,eAAA,eAAA,zFAACD,8FAAuCG,mCAExC,2DAAA,UAAA,YAAA,jFAACH,sFAAoCC,8BACrC,2DAAA,aAAA,UAAA,lFAACD,uFAAgCC,8BACjC,2DAAA,eAAA,eAAA,zFAACD,8FAAuCG,gXAG1C,6DAAA,IAAA,gBAAA,jFAACJ,uFACD,6DAAA,aAAA,aAAA,vFAACA,6FACD,6DAAA,aAAA,aAAA,vFAACA,6FACD,6DAAA,aAAA,aAAA,vFAACA,6FAED,2DAAA,WAAA,gBAAA,tFAACC,2FAAyCC,8BAC1C,2DAAA,WAAA,gBAAA,tFAACD,2FAAyCC,8BAC1C,2DAAA,WAAA,gBAAA,tFAACD,2FAAyCC,8BAE1C,2DAAA,QAAA,oBAAA,vFAACD,4FAA0CC,8BAC3C,2DAAA,QAAA,oBAAA,vFAACD,4FAA0CC;AA7B3G,AAAA,6IAAA,iBAAA,OAAA,SAAA,mCAAA,mFAmCK,AAAA,AAAAG,8FAAA,iBAAAC,WAAA,EAAA,gBAAA,sBAAA,iBAAA,2CAAA,yEAAA,MAAA,wEAAA,KAAA,4EAAA,cAAA,mBAAA,aAAA,gCAAA,oBAAA,cAAA,oBAAA,KAAA,kDAAA,sFAAA,WAAA,56BAuBFC,+OACIC,kGACWX,mBACGE,+bAGKU,sDACA,8CAAA,9CAACC,+DAA6CX;AA9BnE,AAAAO;;;AAyCP,wCAAA,xCAAMK;AAAN,AACE,WAAA,PAAMd;AAAN,AAAA,0GAAA,wDAAA,uBAAA,/FACGe,qJACA,+DAAA,UAAA,0BAAA,nGAACC,gFAAgC,cAAoBhB","names":["kdlyticsgui.wealth/summary-display","re-frame.core/dispatch","cljs.core/deref","data","re_frame.core.subscribe","columns","kdlyticsgui.mrttables.text_col","kdlyticsgui.mrttables.nb_col","kdlyticsgui.mrttables/round0","kdlyticsgui.mrttables/round1","kdlyticsgui.mrttables/round2pc100","helix.core/get-react","obj31309","kdlyticsgui.guitools/mrt-right-element-box-generic","kdlyticsgui.mrttables/material-react-table-template-fast","kdlyticsgui.mrttables/mrt-table-toolbar","kdlyticsgui.mrttables/mrt-default-download-fn","kdlyticsgui.wealth/projection-display","re-com.core/box","kdlyticsgui.guitools.element_box"],"sourcesContent":["(ns kdlyticsgui.wealth\r\n  (:require [kdlyticsgui.guitools :as gt]\r\n            [re-frame.core :as rf]\r\n            [re-com.core :refer [p p-span h-box v-box box gap line scroller border label title button close-button checkbox hyperlink-href slider horizontal-bar-tabs radio-button info-button\r\n                                 single-dropdown hyperlink modal-panel alert-box throbber input-password selection-list md-circle-icon-button\r\n                                 input-text input-textarea popover-anchor-wrapper popover-content-wrapper popover-tooltip datepicker-dropdown] :refer-macros [handler-fn]]\r\n            [kdlyticsgui.mrttables :as mrt]\r\n            [helix.core :refer [defnc $]]\r\n            )\r\n  )\r\n\r\n\r\n(defn summary-display []\r\n  (rf/dispatch [:get-positions-summary])\r\n  (let [data @(rf/subscribe [:positions-summary])\r\n        columns [{:header \"Description\" :id \"description\" :columns [(mrt/text-col \"Ticker\" \"ticker\" 50)\r\n                                                                    (mrt/text-col \"Name\" \"shortName\" 50)\r\n                                                                    (mrt/text-col \"Asset class\" \"asset-class\" 50)\r\n                                                                    (mrt/text-col \"Acc.\" \"account\" 50)\r\n                                                                    (mrt/text-col \"CCY\" \"currency\" 50)]}\r\n                 {:header \"Position & PnL\" :id \"position\" :columns [(mrt/nb-col \"Qt\" \"quantity\" 50 mrt/round0)\r\n                                                                    (mrt/nb-col \"CPU\" \"cost-per-unit\" 50 mrt/round1)\r\n                                                                    (mrt/nb-col \"Price\" \"regularMarketPrice\" 50 mrt/round1)\r\n\r\n                                                                    (mrt/nb-col \"Nav lcl\" \"nav-local\" 50 mrt/round0) ;hide\r\n                                                                    (mrt/nb-col \"Nav \u20ac\" \"nav-eur\" 50 mrt/round0)\r\n                                                                    (mrt/nb-col \"Nav \u20ac %\" \"nav-eur-perc\" 50 mrt/round2pc100) ;formating >5%\r\n\r\n                                                                    (mrt/nb-col \"Pnl lcl\" \"pnl-local\" 50 mrt/round0) ;hide\r\n                                                                    (mrt/nb-col \"Pnl \u20ac\" \"pnl-eur\" 50 mrt/round0)\r\n                                                                    (mrt/nb-col \"Pnl \u20ac %\" \"pnl-eur-perc\" 50 mrt/round2pc100) ;formating here\r\n\r\n                                                                    ]}\r\n                 {:header \"Allocation\" :id \"allocation\" :columns [(mrt/text-col \"#\" \"nb-strategies\" 50)\r\n                                                                  (mrt/text-col \"Strategy 1\" \"strategy-1\" 50)\r\n                                                                  (mrt/text-col \"Strategy 2\" \"strategy-2\" 50)\r\n                                                                  (mrt/text-col \"Strategy 3\" \"strategy-3\" 50)\r\n\r\n                                                                  (mrt/nb-col \"Alloc. 1\" \"alloc-strat-1\" 50 mrt/round0) ;hide\r\n                                                                  (mrt/nb-col \"Alloc. 2\" \"alloc-strat-2\" 50 mrt/round0) ;hide\r\n                                                                  (mrt/nb-col \"Alloc. 3\" \"alloc-strat-3\" 50 mrt/round0) ;hide\r\n\r\n                                                                  (mrt/nb-col \"Total\" \"alloc-strat-total\" 50 mrt/round0)\r\n                                                                  (mrt/nb-col \"Delta\" \"alloc-strat-delta\" 50 mrt/round0) ;if >500 green ?, if below -500 red ?\r\n\r\n                                                                    ]}\r\n                 ;{:header \"Quant metrics\" :id \"quant\" :columns [(mrt/nb-col \"Mkt Cap $mil\" \"marketCap\" 50 mrt/nb-thousand-cell-format)\r\n                 ;                                               (mrt/nb-col \"Margin\" \"profitMargin\" 50 mrt/round0)\r\n                 ;                                               (mrt/nb-col \"TrailEPS\" \"trailingEps\" 50 mrt/round0)\r\n                 ;                                               (mrt/nb-col \"FwdEPS\" \"forwardEps\" 50 mrt/round0)\r\n                 ;\r\n                 ;                                               (mrt/nb-col \"YTD\" \"ytdReturn\" 50 mrt/round1pc)\r\n                 ;                                               (mrt/nb-col \"1Y\" \"52WeekChange\" 50 mrt/round1pc)\r\n                 ;                                               (mrt/nb-col \"High1Y\" \"fiftyTwoWeekHigh\" 50 mrt/round1)\r\n                 ;                                               (mrt/nb-col \"Low1Y\" \"fiftyTwoWeekLow\" 50 mrt/round1)\r\n                 ;                                               (mrt/nb-col \"Beta\" \"beta\" 50 mrt/round1)\r\n                 ;\r\n                 ;                                               (mrt/nb-col \"PE\" \"trailingPE\" 50 mrt/round1)\r\n                 ;                                               (mrt/nb-col \"FwdPE\" \"forwardPE\" 50 mrt/round1)\r\n                 ;                                               (mrt/nb-col \"PB\" \"priceToBook\" 50 mrt/round0)\r\n                 ;                                               (mrt/nb-col \"EV/EB\" \"enterpriseToEbitda\" 100 mrt/round2)\r\n                 ;                                               (mrt/nb-col \"BV\" \"bookValue\" 50 mrt/round0)\r\n                 ;\r\n                 ;                                               (mrt/nb-col \"Div last\" \"lastDividendValue\" 50 mrt/round2)\r\n                 ;                                               (mrt/nb-col \"Div %\" \"dividendYield\" 50 mrt/round2pc100)\r\n                 ;                                               (mrt/nb-col \"Div % 5Y\" \"fiveYearAvgDividendYield\" 50 mrt/round2pc)\r\n                 ;                                               (mrt/nb-col \"Payout\" \"payoutRatio\" 50 mrt/round2pc100)\r\n                 ;                                               ]}\r\n\r\n                 ]\r\n        ]\r\n    ;(println (sort (keys (first data))))\r\n    [gt/mrt-right-element-box-generic \"wealth-summary\" \"100%\" \"BLABLA\" {}\r\n     [($ mrt/material-react-table-template-fast\r\n         {:clj-data data\r\n          :clj-columns columns\r\n          :clj-option-map   {:enableGrouping false :enablePinning true :enablePagination false }         ;all grouping, filtering etc ;:muiTableBodyRowProps go-to-attribution-risk\r\n          :js-initial-state #js {\"density\" \"compact\" \"showColumnFilters\" true \"pagination\" #js {\"pageSize\" 50} \"grouping\" #js []}\r\n          :toolbar          mrt/mrt-table-toolbar\r\n          :download-fn      (mrt/mrt-default-download-fn \"wealth-summary\" columns)\r\n          :photo-id         \"wealth-summary\"})\r\n      ]]\r\n\r\n    ;[box :class \"element\" :child\r\n    ; [gt/mrt-right-element-box-generic \"esg-data\" \"1790px\" \"ESG data\" {}]]\r\n\r\n\r\n    ))\r\n\r\n\r\n(defn projection-display []\r\n  (let [data nil]                                              ;@(rf/subscribe [:summary-display/table])\r\n    [box :class \"subbody rightelement\" :child\r\n     (gt/element-box \"summary\" \"100%\" (str \"Projection \") data\r\n                     []\r\n                     ;[[:> ReactTable\r\n                     ;  {:data           data\r\n                     ;   :columns        [{:Header \"Portfolio\" :accessor \"portfolio\" :width 90 :filterable true :filterMethod tables/text-filter-OR :Cell #((if rot13? t/rot13 identity) (gobj/get % \"value\"))}\r\n                     ;                    {:Header \"Balance\" :columns (mapv #(assoc % :filterable false) (mapv tables/risk-table-columns [:value :cash-pct]))}\r\n                     ;\r\n                     ;                    ]\r\n                     ;   :showPagination false :pageSize (count @(rf/subscribe [:portfolios])) :getTrProps go-to-portfolio-risk :className \"-striped -highlight\"}]\r\n                     ; ]\r\n                     )\r\n     ]\r\n    ))"]}