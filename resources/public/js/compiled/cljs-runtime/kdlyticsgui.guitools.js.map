{"version":3,"sources":["kdlyticsgui/guitools.cljs"],"mappings":"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","names":["G__42457","props__29990__auto__","maybe-ref__29991__auto__","vec__42458","helix.core/extract-cljs-props","map__42461","cljs.core.nth","cljs.core/--destructure-map","cljs.core.get","goog/DEBUG","G__42470","kdlyticsgui.guitools/switch-helix","checked-atom","default-checked","vec__42462","checked","setChecked","helix.hooks/use-state","x","cljs.core/reset!","js/module$node_modules$$mui$material$node$index.Switch","e","G__42469","kdlyticsgui.guitools/mrt-right-element-box-generic","id","width","title-str","opts","children","show-element","reagent.core.atom","re-com.core/v-box","cljs.core.concat","re-com.core/h-box","cljs.core.into","re-com.core/title","re-com.core/gap","cljs.core/not","cljs.core/deref","kdlyticsgui.guitools/mrt-element-box-generic","cljs.core.conj","kdlyticsgui.guitools/mrt-element-box-generic-old","helix.core/get-react","obj42468","obj42472","obj42474","cljs.core.mapv","i","re-com.core/md-circle-icon-button","cljs.core._EQ_","re_frame.core.subscribe","re-frame.core/dispatch","cljs.core.range","kdlyticsgui.guitools/element-box-generic","var_args","G__42476","kdlyticsgui.guitools/element-box","js/Error","download-table","on-click-action","G__42480","kdlyticsgui.guitools/portfolio-dropdown-selector","p1__42478#","re-frame-db-key","kdlyticsgui.guitools.portfolio_dropdown_selector","on-change-key-event","re-com.core/single-dropdown","cljs.core.map","p1__42477#","clojure.set/rename-keys","cljs.core/identity","re_frame.core.reg_event_db","p__42481","vec__42482","db","_","data","cljs.core.assoc","G__42486","kdlyticsgui.guitools/update-js-map","m","k","v","cljs.core/clj->js","cljs.core.js__GT_clj","k1","v1","k2","v2","p__42488","vec__42489","table","item","value","p1__42487#","cljs.core.update","cljs.core.keyword","p__42494","vec__42495","tbl-kw-str","display-style","grouping","clojure.string/includes?","kdlyticsgui.mrttables/attribution-table-columns","cljs.core.distinct","cljs.core.remove","cljs.core/vals","kdlyticsgui.mrttables/risk-table-columns","p1__42492#","kdlyticsgui.guitools.update_js_map","p1__42493#","p__42500","vec__42501","is-equity?","risk-choices","cljs.core/vec","risk-choices-clean","cljs.core/some","p1__42498#","G__42465","helix.hooks/wrap-fx","G__42466","helix.hooks/raw-use-effect","p1__42499#","p__42505","vec__42506","p1__42504#","p__42510","vec__42511","grp","p1__42509#","p__42515","vec__42516","risk-filter-key","risk-filter-nb","cljs.core/namespace","rfv","p1__42514#","G__42519","kdlyticsgui.guitools/redesign-table!","tbl","table?","extra-pins","all-cols","p1__42520#","cljs.core.not_EQ_","c","sc","additional-cols","cljs.core/set","cljs.core/first","g","G__42522","fexpr__42521","cljs.core/rest","cljs.core.apply","cljs.core/concat","re_frame.core.reg_event_fx","p__42524","p__42525","map__42526","vec__42527","p1__42523#","G__42530","p__42533","p__42534","map__42535","vec__42536","p1__42531#","p1__42532#","p__42539","vec__42540","p__42543","vec__42544","p__42550","p__42551","map__42552","vec__42553","snapshot","shortcuts","p1__42547#","p2__42548#","p3__42549#","cljs.core/reduce-kv","cljs.core/name","p__42559","p__42560","map__42561","vec__42562","p1__42556#","p2__42557#","p3__42558#","kdlyticsgui.guitools/left-nav-bar","choices","navigation-key","iter__5523__auto__","s__42566","cljs.core/LazySeq","temp__5804__auto__","cljs.core/seq","cljs.core/chunked-seq?","c__5521__auto__","size__5522__auto__","cljs.core/count","b__42568","cljs.core/chunk-buffer","i__42567","cljs.core/-nth","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__42565","cljs.core/chunk-rest","cljs.core/cons","re-com.core/button","cljs.core/chunk-first"],"sourcesContent":["(ns kdlyticsgui.guitools\r\n  (:require\r\n    [re-com.core :refer [p p-span h-box v-box box gap line scroller border label title button close-button checkbox hyperlink-href slider horizontal-bar-tabs radio-button info-button\r\n                         single-dropdown hyperlink modal-panel alert-box throbber input-password selection-list md-circle-icon-button\r\n                         input-text input-textarea popover-anchor-wrapper popover-content-wrapper popover-tooltip datepicker-dropdown] :refer-macros [handler-fn]]\r\n    [re-frame.core :as rf]\r\n    [reagent.core :as r]\r\n    [kdlyticsgui.tools :as t]\r\n    [kdlyticsgui.static :as static]\r\n    [clojure.set :as cset]\r\n    [kdlyticsgui.mrttables :as mrt]\r\n    [helix.core :refer [$ defnc]]\r\n    [\"@mui/material\" :as mm :refer ( Switch)]\r\n    [helix.hooks :refer [use-state use-effect use-memo]]\r\n    ))\r\n\r\n\r\n\r\n(defnc switch-helix\r\n  [{:keys [checked-atom default-checked]}]\r\n  (let [[checked setChecked] (use-state default-checked)\r\n        x (use-effect [checked] (reset! checked-atom checked))]\r\n    ($ Switch {:size \"small\" :checked checked :onChange (fn [e] (setChecked (aget e \"target\" \"checked\")))})))\r\n\r\n\r\n(defn mrt-right-element-box-generic\r\n  [id width title-str opts children]\r\n  (let [show-element (r/atom true)]\r\n    (fn [id width title-str opts children]                  ;see https://github.com/reagent-project/reagent/blob/master/doc/CreatingReagentComponents.md need to repeat the arguments!\r\n      [:div {:id id}\r\n       [v-box :class \"rightelement\" :gap \"20px\" :width width\r\n        :children (concat [[h-box :align :center :children (into [[title :label title-str :level :level1] [gap :size \"1\"]]\r\n                                                                 (if (:show-hide opts) [($ switch-helix {:checked-atom show-element :default-checked (not (:hide-by-default opts))})]))]]\r\n                          (if @show-element children))]])))\r\n\r\n(defn mrt-element-box-generic\r\n  [id width title-str opts children]\r\n  (let [show-element (r/atom true)]\r\n    (fn [id width title-str opts children]                  ;see https://github.com/reagent-project/reagent/blob/master/doc/CreatingReagentComponents.md need to repeat the arguments!\r\n      [:div {:id id}\r\n       [v-box :class \"element\" :align-self :center :justify :center :gap \"20px\" :width width\r\n        :children (concat [[h-box :gap \"10px\" :align :center\r\n                            :children (conj [[title :label title-str :level :level1] [gap :size \"1\"]]\r\n                                            ;(if (:show-hide opts) [($ switch-helix {:checked-atom show-element :default-checked (not (:hide-by-default opts))})])\r\n\r\n                                            )]]\r\n                          (if @show-element children))]])))\r\n\r\n(defn mrt-element-box-generic-old\r\n  [id width title-str opts children]\r\n  (let [show-element (r/atom true)]\r\n    (fn [id width title-str opts children]                  ;see https://github.com/reagent-project/reagent/blob/master/doc/CreatingReagentComponents.md need to repeat the arguments!\r\n      [:div {:id id}\r\n       [v-box :class \"element\" :align-self :center :justify :center :gap \"20px\" :width width\r\n        :children (concat [[h-box :gap \"10px\" :align :center\r\n                            :children (concat [[title :label title-str :level :level1]\r\n                                               [gap :size \"1\"]]\r\n                                              (if (:shortcuts opts)\r\n                                                (mapv (fn [i] [md-circle-icon-button :md-icon-name (str \"zmdi-collection-item-\" i) :tooltip (str \"Saved view \" i) :tooltip-position :above-center :class (if (= @(rf/subscribe [(:shortcuts opts)]) i) \"active\" \"default\") :on-click #(rf/dispatch [(:shortcuts opts) i])])\r\n                                                      (range 1 5)))\r\n                                              (if (:show-hide opts)\r\n                                                [($ switch-helix {:checked-atom show-element :default-checked (not (:hide-by-default opts))})]))]]\r\n                          (if @show-element children))]])))\r\n\r\n(defn element-box-generic\r\n  \"opts will have either :download-table or :on-click-action, and can have target-id\r\n  \"\r\n  ;TODO DIV ID MAY OR MAY NOT BE THERE\r\n  ;NEED ABILITY TO ADD EXTRA TABLE DOWNLOAD (FULL OR VIEW)\r\n  [id width title-str opts children]\r\n  [:div {:id id}\r\n   [v-box :class \"element\" :align-self :center :justify :center :gap \"20px\" :width width\r\n    :children (concat [[h-box :gap \"10px\" :align :center\r\n                        :children (concat [[title :label title-str :level :level1]\r\n                                           [gap :size \"1\"]]\r\n                                          (if (:shortcuts opts)\r\n                                            (mapv (fn [i] [md-circle-icon-button :md-icon-name (str \"zmdi-collection-item-\" i) :tooltip (str \"Saved view \" i) :tooltip-position :above-center :class (if (= @(rf/subscribe [(:shortcuts opts)]) i) \"active\" \"default\") :on-click #(rf/dispatch [(:shortcuts opts) i])])\r\n                                                  (range 1 5)))\r\n                                          (if-not (:no-icons opts)\r\n                                            [\r\n                                             ;[md-circle-icon-button :md-icon-name \"zmdi-camera\" :tooltip \"Open image in new tab\" :tooltip-position :above-center :on-click (t/open-image-in-new-tab (if-let [tid (:target-id opts)] tid id))]\r\n                                             ;[md-circle-icon-button :md-icon-name \"zmdi-image\" :tooltip \"Save table as image\" :tooltip-position :above-center :on-click (t/save-image (if-let [tid (:target-id opts)] tid id))\r\n                                             ; ;(do (t/save-image (if-let [tid (:target-id opts)] tid \"scorecard-risk\")) (t/save-image (if-let [tid (:target-id opts)] tid \"scorecard-risk-pivot\")))\r\n                                             ; ]\r\n                                             ;[md-circle-icon-button :md-icon-name \"zmdi-download\" :tooltip \"Download table\" :tooltip-position :above-center :on-click (if-let [ocl (:on-click-action opts)] ocl #(t/csv-link (:download-table opts) (str id \"-\" (t/gdate->yyyyMMdd (cljs-time.core/today)))))]\r\n                                             ]))]]\r\n                      children)]])\r\n\r\n;(defn element-box-generic-new\r\n;  \"opts will have either :download-table-fn or :on-click-action, and can have target-id\r\n;  it can also have :cols and :shortcuts and :no-icons\"\r\n;  [id width title-str opts children]\r\n;  [:div {:id id}\r\n;   [v-box :class \"element\" :align-self :center :justify :center :gap \"20px\" :width width\r\n;    :children (concat [[h-box :gap \"10px\" :align :center\r\n;                        :children (concat [[title :label title-str :level :level1]\r\n;                                           [gap :size \"1\"]]\r\n;                                          (if (:shortcuts opts)\r\n;                                            (mapv (fn [i] [md-circle-icon-button :md-icon-name (str \"zmdi-collection-item-\" i) :tooltip (str \"Saved view \" i) :tooltip-position :above-center :class (if (= @(rf/subscribe [(:shortcuts opts)]) i) \"active\" \"default\") :on-click #(rf/dispatch [(:shortcuts opts) i])])\r\n;                                                  (range 1 5)))\r\n;                                          (if-not (:no-icons opts)\r\n;                                            [[md-circle-icon-button :md-icon-name \"zmdi-camera\" :tooltip \"Open image in new tab\" :tooltip-position :above-center :on-click (t/open-image-in-new-tab (if-let [tid (:target-id opts)] tid id))]\r\n;                                             [md-circle-icon-button :md-icon-name \"zmdi-image\" :tooltip \"Save table as image\" :tooltip-position :above-center :on-click (t/save-image (if-let [tid (:target-id opts)] tid id))]\r\n;                                             (if-let [ocl (:on-click-action opts)] [md-circle-icon-button :md-icon-name \"zmdi-filter-list\" :tooltip \"Download current view\" :tooltip-position :above-center :on-click ocl])\r\n;                                             (if-let [x (:download-table-fn opts)] [md-circle-icon-button :md-icon-name \"zmdi-download\" :tooltip \"Download table\" :tooltip-position :above-center :on-click (if-let [c (:cols opts)] #(t/csv-link (x) (str id \"-\" (t/gdate->yyyyMMdd (cljs-time.core/today))) c) #(t/csv-link (x) (str id \"-\" (t/gdate->yyyyMMdd (cljs-time.core/today)))))])]))]]\r\n;                      children)]])\r\n\r\n(defn element-box\r\n  ([id width title-str download-table children] (element-box-generic id width title-str {:download-table download-table} children))\r\n  ([id width title-str download-table on-click-action children] (element-box-generic id width title-str {:on-click-action on-click-action} children)))\r\n\r\n;(defn mrt-element-box\r\n;  ([id width title-str children] (mrt-element-box id width title-str  children))\r\n;  ([id width title-str on-click-action children] (mrt-element-box-generic id width title-str {:on-click-action on-click-action} children)))\r\n\r\n\r\n;(defn element-box-generic-with-cols\r\n;  \"opts will have either :download-table or :on-click-action, and can have target-id\"\r\n;  [id width title-str opts children cols]\r\n;  [:div {:id id}\r\n;   [v-box :class \"element\" :align-self :center :justify :center :gap \"20px\" :width width\r\n;    :children (concat [[h-box :gap \"10px\" :align :center\r\n;                        :children (concat [[title :label title-str :level :level1]\r\n;                                           [gap :size \"1\"]]\r\n;                                          (if (:shortcuts opts)\r\n;                                            (mapv (fn [i] [md-circle-icon-button :md-icon-name (str \"zmdi-collection-item-\" i) :class (if (= @(rf/subscribe [key]) i) \"active\" \"default\") :on-click #(rf/dispatch [key i])])\r\n;                                                  (range 1 5)))\r\n;                                          [[md-circle-icon-button :md-icon-name \"zmdi-camera\" :tooltip \"Open image in new tab\" :tooltip-position :above-center :on-click (t/open-image-in-new-tab (if-let [tid (:target-id opts)] tid id))]\r\n;                                           [md-circle-icon-button :md-icon-name \"zmdi-image\" :tooltip \"Save table as image\" :tooltip-position :above-center :on-click (t/save-image (if-let [tid (:target-id opts)] tid id))]\r\n;                                           [md-circle-icon-button :md-icon-name \"zmdi-download\" :tooltip \"Download table\" :tooltip-position :above-center :on-click (if-let [ocl (:on-click-action opts)] ocl #(t/csv-link (:download-table opts) (str id \"-\" (t/gdate->yyyyMMdd (cljs-time.core/today))) cols))]])]]\r\n;                      children)]])\r\n\r\n;(defn element-box-with-cols\r\n;  ([id width title-str download-table children cols] (element-box-generic-with-cols id width title-str {:download-table download-table} children cols))\r\n;  ([id width title-str download-table on-click-action children cols] (element-box-generic-with-cols id width title-str {:on-click-action on-click-action} children cols)))\r\n\r\n(defn portfolio-dropdown-selector\r\n  ([re-frame-db-key] (portfolio-dropdown-selector re-frame-db-key re-frame-db-key))\r\n  ([re-frame-db-key on-change-key-event]\r\n   [single-dropdown :width \"125px\" :filter-box? true :model (rf/subscribe [re-frame-db-key])\r\n    :choices (map (if @(rf/subscribe [:rot13]) #(clojure.set/rename-keys % {:labelrot13 :label}) identity) @(rf/subscribe [:portfolio-dropdown-map]))\r\n    :on-change #(rf/dispatch [on-change-key-event %])]))\r\n\r\n(rf/reg-event-db\r\n  :quant-model-new-bond/save-bond-response\r\n  (fn [db [_  data]]\r\n    (if (:success data)\r\n      (assoc db :quant-model/new-bond-entry nil :quant-model/new-bond-saved-message (:message data))\r\n      (assoc db :quant-model/new-bond-saved-message (:message data)))))\r\n\r\n(defn update-js-map\r\n  ([m k v]\r\n   (clj->js (assoc (js->clj m) k v)))\r\n  ([m k1 v1 k2 v2]\r\n   (clj->js (assoc (js->clj m) k1 v1 k2 v2))))\r\n\r\n(rf/reg-event-db\r\n  :update-table-js-state\r\n  (fn [db [_ table item value]]\r\n    (update db (keyword table \"mrt-table-state\") #(clj->js\r\n                                                    (if\r\n                                                      (= item \"columnFilters\")\r\n                                                      (assoc (js->clj %) item value)\r\n                                                      (assoc (js->clj %) item value \"expanded\" \"dummy:\"))))))\r\n\r\n\r\n(rf/reg-event-db\r\n  :tree-table-toggle\r\n  (fn [db [_  tbl-kw-str display-style]]\r\n    (let [grouping (if (clojure.string/includes? tbl-kw-str \"attribution\")\r\n                     (conj (map :accessorKey (mapv mrt/attribution-table-columns (distinct (remove #{\"None\"} (vals (get db (keyword tbl-kw-str \"filter\"))))))) \"dummy\")\r\n                     (conj (map :accessorKey (mapv mrt/risk-table-columns (distinct (remove #{\"None\"} (vals (get db (keyword tbl-kw-str \"filter\"))))))) \"dummy\"))]\r\n      (if (clojure.string/includes? tbl-kw-str \"attribution\")\r\n        (-> db\r\n            (assoc (keyword tbl-kw-str \"display-style\") display-style)\r\n            (update (keyword tbl-kw-str \"mrt-table-state\") #(if (= display-style \"Table\") (update-js-map % \"grouping\" [] \"expanded\" {}) (update-js-map % \"grouping\" grouping \"expanded\" {\"dummy:\" true}))))\r\n        (-> db\r\n            (assoc (keyword tbl-kw-str \"display-style\") display-style)\r\n            (assoc (keyword tbl-kw-str \"hide-zero-holdings\") (= display-style \"Table\"))\r\n            (update (keyword tbl-kw-str \"mrt-table-state\") #(if (= display-style \"Table\") (update-js-map % \"grouping\" [] \"expanded\" {}) (update-js-map % \"grouping\" grouping \"expanded\" {\"dummy:\" true}))))))))\r\n\r\n(rf/reg-event-db\r\n  :tree-table-toggle-alignment\r\n  (fn [db [_  tbl-kw-str display-style is-equity?]]\r\n    (let [;is-equity? (if (some #{@(rf/subscribe [:portfolio-alignment/group])} [:equity-tc :equity-eme :equity-india :equity-esg]) true false)\r\n          risk-choices (vec (distinct (remove #{\"None\"} (vals (get db (keyword tbl-kw-str \"filter\"))))))\r\n          risk-choices-clean (if is-equity? (if (= (some #{:sector} risk-choices) :sector) (vec (concat (conj (remove #(= % :sector) risk-choices) :sector-gics)) ) risk-choices) risk-choices)\r\n          grouping (conj (map :accessorKey (mapv mrt/risk-table-columns risk-choices-clean)) \"dummy\")]\r\n      ;(println is-equity?)\r\n      ;(println grouping)\r\n      (-> db\r\n          (assoc (keyword tbl-kw-str \"display-style\") display-style)\r\n          (update (keyword tbl-kw-str \"mrt-table-state\") #(if (= display-style \"Table\") (update-js-map % \"grouping\" [] \"expanded\" {}) (update-js-map % \"grouping\" grouping \"expanded\" {\"dummy:\" true})))))))\r\n\r\n(rf/reg-event-db\r\n  :tree-table-toggle-esg\r\n  (fn [db [_  display-style]]\r\n    (let [grouping (if (= display-style \"sector\") \"sector\" \"country\")]\r\n      (-> db\r\n          (assoc :esg/data-tree (not (= display-style \"no\")))\r\n          (update :esg/mrt-table-state #(if (= display-style \"no\") (update-js-map % \"grouping\" [] \"expanded\" {}) (update-js-map % \"grouping\" (js->clj [grouping]) \"expanded\" {})))\r\n          ))))\r\n\r\n(rf/reg-event-db\r\n  :tree-table-toggle-ta\r\n  (fn [db [_  grp]]\r\n    (-> db\r\n        ;(assoc :ta2022/main-table-pivot display-style)\r\n        (update :ta-trade-view/mrt-table-state #(if (= grp \"No\") (update-js-map % \"grouping\" [] \"expanded\" {}) (update-js-map % \"grouping\" (js->clj [\"dummy\"]) \"expanded\" {\"dummy:\" true})))\r\n        )))\r\n\r\n\r\n;(rf/reg-event-db\r\n;  :tree-table-toggle-ta-col\r\n;  (fn [db [_  view]]\r\n;    (let [view2 (if (= view \"Distances\") {\"country\" false}\r\n;                                       []\r\n;                                       )]\r\n;\r\n;      (-> db\r\n;          (update :ta-trade-view/mrt-table-state #(update-js-map % \"columnVisibility\" #js {\"Country\" false}))\r\n;          ))))\r\n\r\n\r\n\r\n;(defn tree-table-selector\r\n;  [table-keyword-string]\r\n;  [single-dropdown\r\n;   :width \"150px\"\r\n;   :model (rf/subscribe [(keyword table-keyword-string \"display-style\")])\r\n;   :choices static/tree-table-choices\r\n;   :on-change #(rf/dispatch [:tree-table-toggle table-keyword-string %])])\r\n\r\n(rf/reg-event-db\r\n  :filtering-row-change\r\n  (fn [db [_ risk-filter-key risk-filter-nb value]]\r\n    (let [tbl-kw-str (namespace risk-filter-key)\r\n          rfv (assoc (get db risk-filter-key) risk-filter-nb value)\r\n          grouping (if (clojure.string/includes? tbl-kw-str \"attribution\")\r\n                     (conj (map :accessorKey (mapv mrt/attribution-table-columns (distinct (remove #{\"None\"} (vals rfv))))) \"dummy\")\r\n                     (conj (map :accessorKey (mapv mrt/risk-table-columns (distinct (remove #{\"None\"} (vals rfv))))) \"dummy\"))]\r\n      (-> db\r\n          (assoc risk-filter-key rfv)\r\n          (update (keyword tbl-kw-str \"mrt-table-state\") #(if (= (db (keyword tbl-kw-str \"display-style\")) \"Table\") (identity %) (update-js-map % \"grouping\" grouping \"expanded\" {\"dummy:\" true})))\r\n          (assoc :portfolio-history/data [])))))\r\n\r\n(defn redesign-table!\r\n  [tbl table? grouping extra-pins]\r\n  (let [all-cols (js->clj (.map (.filter (.getAllColumns tbl) #(not= (.-id %) \"mrt-row-expand\")) (fn [c] (.map (.-columns c) (fn [sc] (.-id sc))))))\r\n        additional-cols (remove (set (concat grouping extra-pins)) (first all-cols))]\r\n    (.setGrouping tbl (if table? #js [] (clj->js grouping)))\r\n    (.setColumnPinning tbl (clj->js {:left (concat grouping extra-pins (if table? [] [\"mrt-row-expand\"])) :right []}))\r\n    (.setExpanded tbl #js {\"dummy:\" true})\r\n    (.setPagination tbl #js {\"pageSize\" (if table? 15 50)})\r\n    (.setSorting tbl (clj->js (mapv (fn [g] {\"id\" g \"desc\" false}) ((if table? identity rest) (concat grouping extra-pins))))) ;we do not need to sort by dummy\r\n    (.setColumnVisibility tbl (if table? #js {\"dummy\" false \"mrt-row-expand\" false} #js {\"dummy\" true \"mrt-row-expand\" true}))\r\n    (.setColumnOrder tbl (clj->js (concat grouping extra-pins (if table? [] [\"mrt-row-expand\"]) (apply concat (rest all-cols)) additional-cols)))))\r\n\r\n(rf/reg-event-fx\r\n  :filtering-row-change-managed\r\n  (fn [{:keys [db]} [_ risk-filter-key risk-filter-nb value tbl]]\r\n    (let [tbl-kw-str (namespace risk-filter-key)\r\n          rfv (assoc (get db risk-filter-key) risk-filter-nb value)\r\n          grouping (if (clojure.string/includes? tbl-kw-str \"attribution\")\r\n                     (conj (map :accessorKey (mapv mrt/attribution-table-columns (distinct (remove #{\"None\"} (vals rfv))))) \"dummy\")\r\n                     (conj (map :accessorKey (mapv mrt/risk-table-columns (distinct (remove #{\"None\"} (vals rfv))))) \"dummy\"))\r\n          ;table? (= (db (keyword tbl-kw-str \"display-style\")) \"Table\")\r\n          ;extra-pins (if (clojure.string/includes? tbl-kw-str \"attribution\") [] [:NAME])\r\n          ]\r\n      ;(redesign-table! tbl table? grouping extra-pins)\r\n      {:db (-> db\r\n               (assoc risk-filter-key rfv)\r\n               (update (keyword tbl-kw-str \"mrt-table-state\") #(if (= (db (keyword tbl-kw-str \"display-style\")) \"Table\") (identity %) (update-js-map % \"grouping\" grouping \"expanded\" {\"dummy:\" true})))\r\n               (assoc :portfolio-history/data []))\r\n       :fx [(if (clojure.string/includes? tbl-kw-str \"attribution\") [:dispatch [:redesign-single-attribution-table tbl]] [:dispatch [:redesign-single-portfolio-table tbl]])]\r\n       })))\r\n\r\n(rf/reg-event-fx\r\n  :tree-table-toggle-managed\r\n  (fn [{:keys [db]} [_ tbl-kw-str display-style tbl]]\r\n    (let [grouping (if (clojure.string/includes? tbl-kw-str \"attribution\")\r\n                     (conj (map :accessorKey (mapv mrt/attribution-table-columns (distinct (remove #{\"None\"} (vals (get db (keyword tbl-kw-str \"filter\"))))))) \"dummy\")\r\n                     (conj (map :accessorKey (mapv mrt/risk-table-columns (distinct (remove #{\"None\"} (vals (get db (keyword tbl-kw-str \"filter\"))))))) \"dummy\"))\r\n          extra-pins (if (clojure.string/includes? tbl-kw-str \"attribution\") [] [:NAME])]\r\n      ;(redesign-table! tbl (= display-style \"Table\") grouping extra-pins)\r\n      {:db (if (clojure.string/includes? tbl-kw-str \"attribution\")\r\n             (-> db\r\n                 (assoc (keyword tbl-kw-str \"display-style\") display-style)\r\n                 (update (keyword tbl-kw-str \"mrt-table-state\") #(if (= display-style \"Table\") (update-js-map % \"grouping\" [] \"expanded\" {}) (update-js-map % \"grouping\" grouping \"expanded\" {\"dummy:\" true}))))\r\n             (-> db\r\n                 (assoc (keyword tbl-kw-str \"display-style\") display-style)\r\n                 (assoc (keyword tbl-kw-str \"hide-zero-holdings\") (= display-style \"Table\"))\r\n                 (update (keyword tbl-kw-str \"mrt-table-state\") #(if (= display-style \"Table\") (update-js-map % \"grouping\" [] \"expanded\" {}) (update-js-map % \"grouping\" grouping \"expanded\" {\"dummy:\" true})))))\r\n       :fx [(if (clojure.string/includes? tbl-kw-str \"attribution\") [:dispatch [:redesign-single-attribution-table tbl]] [:dispatch [:redesign-single-portfolio-table tbl]])]\r\n       })))\r\n\r\n;(defn filtering-row\r\n;  \"key can be equal to :single-portfolio-risk/filter\"\r\n;  [key]\r\n;  (let [risk-filter (rf/subscribe [key])]\r\n;    [h-box :gap \"10px\" :align :center\r\n;     :children (into [] (for [i (range 1 4)]\r\n;                          ^{:key (str \"filtering\" i)}\r\n;                          [single-dropdown\r\n;                           :width \"125px\"\r\n;                           :model (r/cursor risk-filter [i])\r\n;                           :choices (if (.includes ^string (str key) \"attribution\") static/attribution-choice-map static/risk-choice-map)\r\n;                           :disabled? (and (= i 3) (some #{key} [:portfolio-history/filter :attribution-history/filter]))\r\n;                           :on-change #(rf/dispatch [:filtering-row-change key i %])]))]))\r\n;\r\n;(defn filtering-row-managed-table\r\n;  \"key can be equal to :single-portfolio-risk/filter\"\r\n;  [key table-ref]\r\n;  (let [risk-filter (rf/subscribe [key])]\r\n;    [h-box :gap \"10px\" :align :center\r\n;     :children (into [] (for [i (range 1 4)]\r\n;                          ^{:key (str \"filtering\" i)}\r\n;                          [single-dropdown\r\n;                           :width \"125px\"\r\n;                           :model (r/cursor risk-filter [i])\r\n;                           :choices (if (.includes ^string (str key) \"attribution\") static/attribution-choice-map static/risk-choice-map)\r\n;                           :disabled? (and (= i 3) (some #{key} [:portfolio-history/filter :attribution-history/filter]))\r\n;                           :on-change #(rf/dispatch [:filtering-row-change-managed key i % (.-current table-ref)])]))]))\r\n;\r\n;(defn tree-table-selector-managed-table\r\n;  [table-keyword-string table-ref]\r\n;  [single-dropdown\r\n;   :width \"150px\"\r\n;   :model (rf/subscribe [(keyword table-keyword-string \"display-style\")])\r\n;   :choices static/tree-table-choices\r\n;   :on-change #(rf/dispatch [:tree-table-toggle-managed table-keyword-string % (.-current table-ref)])])\r\n\r\n(rf/reg-event-db\r\n  :redesign-single-portfolio-table\r\n  (fn [db [_ tbl]]\r\n    (redesign-table! tbl\r\n                     (= (db :single-portfolio-risk/display-style) \"Table\")\r\n                     (conj (map :accessorKey (mapv mrt/risk-table-columns (distinct (remove #{\"None\"} (vals (db :single-portfolio-risk/filter)))))) \"dummy\")\r\n                     [:NAME])\r\n    db))\r\n\r\n(rf/reg-event-db\r\n  :redesign-single-attribution-table\r\n  (fn [db [_ tbl]]\r\n    (redesign-table! tbl\r\n                     (= (db :single-portfolio-attribution/display-style) \"Table\")\r\n                     (conj (map :accessorKey (mapv mrt/attribution-table-columns (distinct (remove #{\"None\"} (vals (db :single-portfolio-attribution/filter)))))) \"dummy\")\r\n                     [:Security])\r\n    db))\r\n\r\n(rf/reg-event-fx\r\n  :single-portfolio-risk/shortcut\r\n  (fn [{:keys [db]} [_ snapshot tbl]]\r\n    (let [shortcuts [{:empty 0}                             ;this is snapshot 0\r\n                     {:display-style \"Table\" :hide-zero-holdings true  :filter {1 :region 2 :country 3 :issuer} :mrt-table-state #js {\"columnFilters\" #js [] \"grouping\" #js [] \"expanded\" #js {}}}\r\n                     {:display-style \"Tree\"  :hide-zero-holdings false :filter {1 :country 2 :sector 3 \"None\"}  :mrt-table-state #js {\"columnFilters\" #js [] \"grouping\" #js [\"dummy\" \"qt-risk-country-name\" \"qt-jpm-sector\"] \"expanded\" #js {\"dummy:\" true}}}\r\n                     {:display-style \"Tree\"  :hide-zero-holdings false :filter {1 :sector 2 :country 3 \"None\"}  :mrt-table-state #js {\"columnFilters\" #js [] \"grouping\" #js [\"dummy\" \"qt-jpm-sector\" \"qt-risk-country-name\"] \"expanded\" #js {\"dummy:\" true}}}\r\n                     {:display-style \"Tree\"  :hide-zero-holdings false :filter {1 :sector 2 :country 3 :issuer} :mrt-table-state #js {\"columnFilters\" #js [] \"grouping\" #js [\"dummy\" \"qt-jpm-sector\" \"qt-risk-country-name\" \"TICKER\"] \"expanded\" #js {\"dummy:\" true}}}]]\r\n      {:db (reduce-kv #(assoc %1 (keyword \"single-portfolio-risk\" (name %2)) %3) db (assoc (nth shortcuts snapshot) \"shortcut\" snapshot))\r\n       :fx [[:dispatch [:redesign-single-portfolio-table tbl]]]})))\r\n\r\n(rf/reg-event-fx\r\n  :single-portfolio-attribution/shortcut\r\n  (fn [{:keys [db]} [_ snapshot tbl]]\r\n    (let [shortcuts [{:empty 0}                             ;this is snapshot 0\r\n                     {:display-style \"Tree\" :filter {1 :region 2 :country 3 :issuer} :mrt-table-state #js {\"columnFilters\" #js [] \"grouping\" #js [\"dummy\" \"Region\" \"Country\" \"Issuer\"] \"expanded\" #js {\"dummy:\" true}}}\r\n                     {:display-style \"Tree\" :filter {1 :country 2 :sector 3 :issuer} :mrt-table-state #js {\"columnFilters\" #js [] \"grouping\" #js [\"dummy\" \"Region\" \"Sector\" \"Issuer\"] \"expanded\" #js {\"dummy:\" true}}}\r\n                     {:display-style \"Tree\" :filter {1 :sector 2 :country 3 :issuer} :mrt-table-state #js {\"columnFilters\" #js [] \"grouping\" #js [\"dummy\" \"Sector\" \"Country\" \"Issuer\"] \"expanded\" #js {\"dummy:\" true}}}\r\n                     {:display-style \"Tree\" :filter {1 :issuer 2 \"None\" 3 \"None\"}    :mrt-table-state #js {\"columnFilters\" #js [] \"grouping\" #js [\"dummy\" \"Issuer\"] \"expanded\" #js {\"dummy:\" true}}}]]\r\n      {:db (reduce-kv #(assoc %1 (keyword \"single-portfolio-attribution\" (name %2)) %3) db (assoc (nth shortcuts snapshot) \"shortcut\" snapshot))\r\n       :fx [[:dispatch [:redesign-single-attribution-table tbl]]]})))\r\n\r\n\r\n(defn left-nav-bar\r\n  [choices navigation-key]\r\n  [v-box :gap \"20px\" :class \"leftnavbar\"\r\n   :children (into []\r\n                   (for [item choices]\r\n                     ^{:key item}\r\n                     [button\r\n                      :class (str \"btn btn-primary btn-block\" (if (= @(rf/subscribe [navigation-key]) (:code item)) \" active\"))\r\n                      :label (:name item)\r\n                      :on-click #(rf/dispatch [navigation-key (:code item)])]))])\r\n\r\n;(defn portfolio-group-selector\r\n;  \"Usage: [portfolio-group-selector :stresstest/selected-portfolios [:dummies]]\"\r\n;  [selected-portfolios-key excluded-groups-seq]\r\n;  (let [selected-portfolios (rf/subscribe [selected-portfolios-key])\r\n;        toggle-portfolios (fn [setseqp] (if (cset/subset? setseqp @selected-portfolios) (cset/difference @selected-portfolios setseqp) (cset/union @selected-portfolios setseqp)))\r\n;        groups (t/chainfilter {:id #(not (some #{%} excluded-groups-seq))} static/portfolio-alignment-groups)\r\n;        all-portfolios-set (set (mapcat :portfolios groups))\r\n;        all-portfolios-set-x-model  (set (mapcat :portfolios (t/chainfilter {:id #(not (some #{%} [:models :dummies]))} static/portfolio-alignment-groups)))\r\n;        all-emcd (disj (set (mapcat :portfolios (t/chainfilter {:id #(not (some #{%} [:models :dummies :hcd :blend :dm]))} static/portfolio-alignment-groups))) \"ITLXEMD4\")\r\n;        rot13? @(rf/subscribe [:rot13])]\r\n;    ;(println static/portfolio-alignment-groups)\r\n;    [h-box :gap \"5px\"\r\n;     :children (into [[title :label \"Portfolios:\" :level :level3]\r\n;                      [v-box :gap \"2px\" :children (remove nil? [(if-not (some #{:models} excluded-groups-seq) [button :style {:width \"100px\"} :label \"EMCD USD\" :on-click #(rf/dispatch [selected-portfolios-key all-emcd])])\r\n;                                                                [button :style {:width \"100px\"} :label \"All\" :on-click #(rf/dispatch [selected-portfolios-key all-portfolios-set])]\r\n;                                                                [button :style {:width \"100px\"} :label \"None\" :on-click #(rf/dispatch [selected-portfolios-key #{}])]])]]\r\n;                     (for [line groups]\r\n;                       (let [possible-portfolios (:portfolios line)]\r\n;                         ^{:key (first possible-portfolios)}                           ;this is so React doesn't get confused by the for loop\r\n;                         [v-box :gap \"2px\" :children\r\n;                          [[button :style {:width \"125px\"} :label ((if rot13? t/rot13 identity) (:label line)) :on-click #(rf/dispatch [selected-portfolios-key (toggle-portfolios (set possible-portfolios))])]\r\n;                           [selection-list :width \"125px\" :model selected-portfolios :choices (mapv (fn [p] {:id p :label ((if rot13? t/rot13 identity) p)}) possible-portfolios) :on-change #(rf/dispatch [selected-portfolios-key %])]]])))]))"]}