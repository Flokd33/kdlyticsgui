shadow$provide.module$node_modules$$tanstack$virtual_core$build$lib$index=function(global,require,module,exports){function calculateRange(_ref9){var measurements=_ref9.measurements,outerSize=_ref9.outerSize;_ref9=_ref9.scrollOffset;for(var count=measurements.length-1,startIndex=findNearestBinarySearch(0,count,function(index){return measurements[index].start},_ref9),endIndex=startIndex;endIndex<count&&measurements[endIndex].end<_ref9+outerSize;)endIndex++;return{startIndex,endIndex}}Object.defineProperty(exports,
"__esModule",{value:!0});var _rollupPluginBabelHelpers=require("module$node_modules$$tanstack$virtual_core$build$lib$_virtual$_rollupPluginBabelHelpers"),utils=require("module$node_modules$$tanstack$virtual_core$build$lib$utils"),defaultKeyExtractor=function(index){return index},defaultRangeExtractor=function(range){var end=Math.min(range.endIndex+range.overscan,range.count-1),arr=[];for(range=Math.max(range.startIndex-range.overscan,0);range<=end;range++)arr.push(range);return arr},measureElement=
function(element,entry,instance){return null!=entry&&entry.borderBoxSize&&(entry=entry.borderBoxSize[0])?Math.round(entry[instance.options.horizontal?"inlineSize":"blockSize"]):Math.round(element.getBoundingClientRect()[instance.options.horizontal?"width":"height"])},findNearestBinarySearch=function(low,high,getCurrentValue,value){for(;low<=high;){var middle=(low+high)/2|0,currentValue=getCurrentValue(middle);if(currentValue<value)low=middle+1;else if(currentValue>value)high=middle-1;else return middle}return 0<
low?low-1:0};exports.approxEqual=utils.approxEqual;exports.memo=utils.memo;exports.notUndefined=utils.notUndefined;exports.Virtualizer=function(_opts){var _this=this;this.unsubs=[];this.scrollElement=null;this.isScrolling=!1;this.scrollToIndexTimeoutId=this.isScrollingTimeoutId=null;this.measurementsCache=[];this.itemSizeCache=new Map;this.pendingMeasuredCacheIndexes=[];this.scrollDirection=null;this.scrollAdjustments=0;this.measureElementCache=new Map;this.observer=function(){var _ro=null,get=function(){return _ro?
_ro:"undefined"!==typeof ResizeObserver?_ro=new ResizeObserver(function(entries){entries.forEach(function(entry){_this._measureElement(entry.target,entry)})}):null};return{disconnect:function(){var _get;return null==(_get=get())?void 0:_get.disconnect()},observe:function(target){var _get2;return null==(_get2=get())?void 0:_get2.observe(target,{box:"border-box"})},unobserve:function(target){var _get3;return null==(_get3=get())?void 0:_get3.unobserve(target)}}}();this.range={startIndex:0,endIndex:0};
this.setOptions=function(opts){Object.entries(opts).forEach(function(_ref3){var key=_ref3[0];"undefined"===typeof _ref3[1]&&delete opts[key]});_this.options=_rollupPluginBabelHelpers["extends"]({debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:defaultKeyExtractor,rangeExtractor:defaultRangeExtractor,onChange:function(){},measureElement,initialRect:{width:0,height:0},scrollMargin:0,scrollingDelay:150,indexAttribute:"data-index",
initialMeasurementsCache:[],lanes:1},opts)};this.notify=function(){null==_this.options.onChange?void 0:_this.options.onChange(_this)};this.cleanup=function(){_this.unsubs.filter(Boolean).forEach(function(d){return d()});_this.unsubs=[];_this.scrollElement=null};this._didMount=function(){_this.measureElementCache.forEach(_this.observer.observe);return function(){_this.observer.disconnect();_this.cleanup()}};this._willUpdate=function(){var scrollElement=_this.options.getScrollElement();_this.scrollElement!==
scrollElement&&(_this.cleanup(),_this.scrollElement=scrollElement,_this._scrollToOffset(_this.scrollOffset,{adjustments:void 0,behavior:void 0}),_this.unsubs.push(_this.options.observeElementRect(_this,function(rect){var prev=_this.scrollRect;_this.scrollRect=rect;(_this.options.horizontal?rect.width!==prev.width:rect.height!==prev.height)&&_this.maybeNotify()})),_this.unsubs.push(_this.options.observeElementOffset(_this,function(offset){_this.scrollAdjustments=0;_this.scrollOffset!==offset&&(null!==
_this.isScrollingTimeoutId&&(clearTimeout(_this.isScrollingTimeoutId),_this.isScrollingTimeoutId=null),_this.isScrolling=!0,_this.scrollDirection=_this.scrollOffset<offset?"forward":"backward",_this.scrollOffset=offset,_this.maybeNotify(),_this.isScrollingTimeoutId=setTimeout(function(){_this.isScrollingTimeoutId=null;_this.isScrolling=!1;_this.scrollDirection=null;_this.maybeNotify()},_this.options.scrollingDelay))})))};this.getSize=function(){return _this.scrollRect[_this.options.horizontal?"width":
"height"]};this.memoOptions=utils.memo(function(){return[_this.options.count,_this.options.paddingStart,_this.options.scrollMargin,_this.options.getItemKey]},function(count,paddingStart,scrollMargin,getItemKey){_this.pendingMeasuredCacheIndexes=[];return{count,paddingStart,scrollMargin,getItemKey}},{key:!1});this.getFurthestMeasurement=function(measurements,index){var furthestMeasurementsFound=new Map,furthestMeasurements=new Map;for(--index;0<=index;index--){var measurement=measurements[index];if(!furthestMeasurementsFound.has(measurement.lane)){var previousFurthestMeasurement=
furthestMeasurements.get(measurement.lane);null==previousFurthestMeasurement||measurement.end>previousFurthestMeasurement.end?furthestMeasurements.set(measurement.lane,measurement):measurement.end<previousFurthestMeasurement.end&&furthestMeasurementsFound.set(measurement.lane,!0);if(furthestMeasurementsFound.size===_this.options.lanes)break}}return furthestMeasurements.size===_this.options.lanes?Array.from(furthestMeasurements.values()).sort(function(a,b){return a.end-b.end})[0]:void 0};this.getMeasurements=
utils.memo(function(){return[_this.memoOptions(),_this.itemSizeCache]},function(_ref4,itemSizeCache){var count=_ref4.count,paddingStart=_ref4.paddingStart,scrollMargin=_ref4.scrollMargin;_ref4=_ref4.getItemKey;var min=0<_this.pendingMeasuredCacheIndexes.length?Math.min.apply(Math,_this.pendingMeasuredCacheIndexes):0;_this.pendingMeasuredCacheIndexes=[];for(var measurements=_this.measurementsCache.slice(0,min);min<count;min++){var key=_ref4(min),furthestMeasurement=1===_this.options.lanes?measurements[min-
1]:_this.getFurthestMeasurement(measurements,min),start=furthestMeasurement?furthestMeasurement.end:paddingStart+scrollMargin,measuredSize=itemSizeCache.get(key);measuredSize="number"===typeof measuredSize?measuredSize:_this.options.estimateSize(min);measurements[min]={index:min,start,size:measuredSize,end:start+measuredSize,key,lane:furthestMeasurement?furthestMeasurement.lane:min%_this.options.lanes}}return _this.measurementsCache=measurements},{key:"getMeasurements",debug:function(){return _this.options.debug}});
this.calculateRange=utils.memo(function(){return[_this.getMeasurements(),_this.getSize(),_this.scrollOffset]},function(measurements,outerSize,scrollOffset){return _this.range=calculateRange({measurements,outerSize,scrollOffset})},{key:"calculateRange",debug:function(){return _this.options.debug}});this.maybeNotify=utils.memo(function(){var range=_this.calculateRange();return[range.startIndex,range.endIndex,_this.isScrolling]},function(){_this.notify()},{key:"maybeNotify",debug:function(){return _this.options.debug},
initialDeps:[this.range.startIndex,this.range.endIndex,this.isScrolling]});this.getIndexes=utils.memo(function(){return[_this.options.rangeExtractor,_this.calculateRange(),_this.options.overscan,_this.options.count]},function(rangeExtractor,range,overscan,count){return rangeExtractor(_rollupPluginBabelHelpers["extends"]({},range,{overscan,count}))},{key:"getIndexes",debug:function(){return _this.options.debug}});this.indexFromElement=function(node){var attributeName=_this.options.indexAttribute;node=
node.getAttribute(attributeName);return node?parseInt(node,10):(console.warn("Missing attribute name '"+attributeName+"\x3d{index}' on measured element."),-1)};this._measureElement=function(node,entry){var _this$itemSizeCache$g,index=_this.indexFromElement(node),item=_this.measurementsCache[index];if(item){var prevNode=_this.measureElementCache.get(item.key);if(node.isConnected)prevNode!==node&&(prevNode&&_this.observer.unobserve(prevNode),_this.observer.observe(node),_this.measureElementCache.set(item.key,
node)),node=_this.options.measureElement(node,entry,_this),entry=null!=(_this$itemSizeCache$g=_this.itemSizeCache.get(item.key))?_this$itemSizeCache$g:item.size,_this$itemSizeCache$g=node-entry,0!==_this$itemSizeCache$g&&(item.start<_this.scrollOffset&&(_this.options.debug&&console.info("correction",_this$itemSizeCache$g),_this._scrollToOffset(_this.scrollOffset,{adjustments:_this.scrollAdjustments+=_this$itemSizeCache$g,behavior:void 0})),_this.pendingMeasuredCacheIndexes.push(index),_this.itemSizeCache=
new Map(_this.itemSizeCache.set(item.key,node)),_this.notify());else if(_this.observer.unobserve(node),node===prevNode)_this.measureElementCache["delete"](item.key)}};this.measureElement=function(node){node&&_this._measureElement(node,void 0)};this.getVirtualItems=utils.memo(function(){return[_this.getIndexes(),_this.getMeasurements()]},function(indexes,measurements){for(var virtualItems=[],k=0,len=indexes.length;k<len;k++)virtualItems.push(measurements[indexes[k]]);return virtualItems},{key:"getIndexes",
debug:function(){return _this.options.debug}});this.getVirtualItemForOffset=function(offset){var measurements=_this.getMeasurements();return utils.notUndefined(measurements[findNearestBinarySearch(0,measurements.length-1,function(index){return utils.notUndefined(measurements[index]).start},offset)])};this.getOffsetForAlignment=function(toOffset,align){var size=_this.getSize();"auto"===align&&(align=toOffset<=_this.scrollOffset?"start":toOffset>=_this.scrollOffset+size?"end":"start");"start"!==align&&
("end"===align?toOffset-=size:"center"===align&&(toOffset-=size/2));align=_this.options.horizontal?"scrollWidth":"scrollHeight";align=(_this.scrollElement?"document"in _this.scrollElement?_this.scrollElement.document.documentElement[align]:_this.scrollElement[align]:0)-_this.getSize();return Math.max(Math.min(align,toOffset),0)};this.getOffsetForIndex=function(index,align){void 0===align&&(align="auto");index=Math.max(0,Math.min(index,_this.options.count-1));index=utils.notUndefined(_this.getMeasurements()[index]);
if("auto"===align)if(index.end>=_this.scrollOffset+_this.getSize()-_this.options.scrollPaddingEnd)align="end";else if(index.start<=_this.scrollOffset+_this.options.scrollPaddingStart)align="start";else return[_this.scrollOffset,align];return[_this.getOffsetForAlignment("end"===align?index.end+_this.options.scrollPaddingEnd:index.start-_this.options.scrollPaddingStart,align),align]};this.isDynamicMode=function(){return 0<_this.measureElementCache.size};this.cancelScrollToIndex=function(){null!==_this.scrollToIndexTimeoutId&&
(clearTimeout(_this.scrollToIndexTimeoutId),_this.scrollToIndexTimeoutId=null)};this.scrollToOffset=function(toOffset,_temp){_temp=void 0===_temp?{}:_temp;var _ref5$align=_temp.align;_ref5$align=void 0===_ref5$align?"start":_ref5$align;_temp=_temp.behavior;_this.cancelScrollToIndex();"smooth"===_temp&&_this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");_this._scrollToOffset(_this.getOffsetForAlignment(toOffset,_ref5$align),{adjustments:void 0,
behavior:_temp})};this.scrollToIndex=function(index,_temp2){_temp2=void 0===_temp2?{}:_temp2;var _ref6$align=_temp2.align;_ref6$align=void 0===_ref6$align?"auto":_ref6$align;var behavior=_temp2.behavior;index=Math.max(0,Math.min(index,_this.options.count-1));_this.cancelScrollToIndex();"smooth"===behavior&&_this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");_temp2=_this.getOffsetForIndex(index,_ref6$align);var align=_temp2[1];_this._scrollToOffset(_temp2[0],
{adjustments:void 0,behavior});"smooth"!==behavior&&_this.isDynamicMode()&&(_this.scrollToIndexTimeoutId=setTimeout(function(){_this.scrollToIndexTimeoutId=null;if(_this.measureElementCache.has(_this.options.getItemKey(index))){var _toOffset=_this.getOffsetForIndex(index,align)[0];utils.approxEqual(_toOffset,_this.scrollOffset)||_this.scrollToIndex(index,{align,behavior})}else _this.scrollToIndex(index,{align,behavior})}))};this.scrollBy=function(delta,_temp3){_temp3=(void 0===_temp3?{}:_temp3).behavior;
_this.cancelScrollToIndex();"smooth"===_temp3&&_this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");_this._scrollToOffset(_this.scrollOffset+delta,{adjustments:void 0,behavior:_temp3})};this.getTotalSize=function(){var _this$getMeasurements;return((null==(_this$getMeasurements=_this.getMeasurements()[_this.options.count-1])?void 0:_this$getMeasurements.end)||_this.options.paddingStart)-_this.options.scrollMargin+_this.options.paddingEnd};this._scrollToOffset=
function(offset,_ref8){_this.options.scrollToFn(offset,{behavior:_ref8.behavior,adjustments:_ref8.adjustments},_this)};this.measure=function(){_this.itemSizeCache=new Map;_this.notify()};this.setOptions(_opts);this.scrollRect=this.options.initialRect;this.scrollOffset=this.options.initialOffset;this.measurementsCache=this.options.initialMeasurementsCache;this.measurementsCache.forEach(function(item){_this.itemSizeCache.set(item.key,item.size)});this.maybeNotify()};exports.defaultKeyExtractor=defaultKeyExtractor;
exports.defaultRangeExtractor=defaultRangeExtractor;exports.elementScroll=function(offset,_ref2,instance){var _instance$scrollEleme3,_instance$scrollEleme4,_ref2$adjustments=_ref2.adjustments;_ref2=_ref2.behavior;offset+=void 0===_ref2$adjustments?0:_ref2$adjustments;null==(_instance$scrollEleme3=instance.scrollElement)?void 0:null==_instance$scrollEleme3.scrollTo?void 0:_instance$scrollEleme3.scrollTo((_instance$scrollEleme4={},_instance$scrollEleme4[instance.options.horizontal?"left":"top"]=offset,
_instance$scrollEleme4.behavior=_ref2,_instance$scrollEleme4))};exports.measureElement=measureElement;exports.observeElementOffset=function(instance,cb){var element=instance.scrollElement;if(element){var handler=function(){cb(element[instance.options.horizontal?"scrollLeft":"scrollTop"])};handler();element.addEventListener("scroll",handler,{passive:!0});return function(){element.removeEventListener("scroll",handler)}}};exports.observeElementRect=function(instance,cb){var element=instance.scrollElement;
if(element){var handler=function(rect){cb({width:Math.round(rect.width),height:Math.round(rect.height)})};handler(element.getBoundingClientRect());var observer=new ResizeObserver(function(entries){entries=entries[0];if(null!=entries&&entries.borderBoxSize&&(entries=entries.borderBoxSize[0])){handler({width:entries.inlineSize,height:entries.blockSize});return}handler(element.getBoundingClientRect())});observer.observe(element,{box:"border-box"});return function(){observer.unobserve(element)}}};exports.observeWindowOffset=
function(instance,cb){var element=instance.scrollElement;if(element){var handler=function(){cb(element[instance.options.horizontal?"scrollX":"scrollY"])};handler();element.addEventListener("scroll",handler,{passive:!0});return function(){element.removeEventListener("scroll",handler)}}};exports.observeWindowRect=function(instance,cb){var element=instance.scrollElement;if(element){var handler=function(){cb({width:element.innerWidth,height:element.innerHeight})};handler();element.addEventListener("resize",
handler,{passive:!0});return function(){element.removeEventListener("resize",handler)}}};exports.windowScroll=function(offset,_ref,instance){var _instance$scrollEleme,_instance$scrollEleme2,_ref$adjustments=_ref.adjustments;_ref=_ref.behavior;offset+=void 0===_ref$adjustments?0:_ref$adjustments;null==(_instance$scrollEleme=instance.scrollElement)?void 0:null==_instance$scrollEleme.scrollTo?void 0:_instance$scrollEleme.scrollTo((_instance$scrollEleme2={},_instance$scrollEleme2[instance.options.horizontal?
"left":"top"]=offset,_instance$scrollEleme2.behavior=_ref,_instance$scrollEleme2))}}
//# sourceMappingURL=module$node_modules$$tanstack$virtual_core$build$lib$index.js.map
