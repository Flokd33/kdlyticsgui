{
"version":3,
"file":"module$node_modules$vega_crossfilter$build$vega_crossfilter.js",
"lineCount":23,
"mappings":"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",
"sources":["node_modules/vega-crossfilter/build/vega-crossfilter.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$vega_crossfilter$build$vega_crossfilter\"] = function(global,require,module,exports) {\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('vega-dataflow'), require('vega-util')) :\n  typeof define === 'function' && define.amd ? define(['exports', 'vega-dataflow', 'vega-util'], factory) :\n  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory((global.vega = global.vega || {}, global.vega.transforms = {}), global.vega, global.vega));\n})(this, (function (exports, vegaDataflow, vegaUtil) { 'use strict';\n\n  const array8 = n => new Uint8Array(n);\n  const array16 = n => new Uint16Array(n);\n  const array32 = n => new Uint32Array(n);\n\n  /**\n   * Maintains CrossFilter state.\n   */\n  function Bitmaps() {\n    let width = 8,\n      data = [],\n      seen = array32(0),\n      curr = array(0, width),\n      prev = array(0, width);\n    return {\n      data: () => data,\n      seen: () => seen = lengthen(seen, data.length),\n      add(array) {\n        for (let i = 0, j = data.length, n = array.length, t; i < n; ++i) {\n          t = array[i];\n          t._index = j++;\n          data.push(t);\n        }\n      },\n      remove(num, map) {\n        // map: index -> boolean (true => remove)\n        const n = data.length,\n          copy = Array(n - num),\n          reindex = data; // reuse old data array for index map\n        let t, i, j;\n\n        // seek forward to first removal\n        for (i = 0; !map[i] && i < n; ++i) {\n          copy[i] = data[i];\n          reindex[i] = i;\n        }\n\n        // condense arrays\n        for (j = i; i < n; ++i) {\n          t = data[i];\n          if (!map[i]) {\n            reindex[i] = j;\n            curr[j] = curr[i];\n            prev[j] = prev[i];\n            copy[j] = t;\n            t._index = j++;\n          } else {\n            reindex[i] = -1;\n          }\n          curr[i] = 0; // clear unused bits\n        }\n\n        data = copy;\n        return reindex;\n      },\n      size: () => data.length,\n      curr: () => curr,\n      prev: () => prev,\n      reset: k => prev[k] = curr[k],\n      all: () => width < 0x101 ? 0xff : width < 0x10001 ? 0xffff : 0xffffffff,\n      set(k, one) {\n        curr[k] |= one;\n      },\n      clear(k, one) {\n        curr[k] &= ~one;\n      },\n      resize(n, m) {\n        const k = curr.length;\n        if (n > k || m > width) {\n          width = Math.max(m, width);\n          curr = array(n, width, curr);\n          prev = array(n, width);\n        }\n      }\n    };\n  }\n  function lengthen(array, length, copy) {\n    if (array.length >= length) return array;\n    copy = copy || new array.constructor(length);\n    copy.set(array);\n    return copy;\n  }\n  function array(n, m, array) {\n    const copy = (m < 0x101 ? array8 : m < 0x10001 ? array16 : array32)(n);\n    if (array) copy.set(array);\n    return copy;\n  }\n\n  function Dimension (index, i, query) {\n    const bit = 1 << i;\n    return {\n      one: bit,\n      zero: ~bit,\n      range: query.slice(),\n      bisect: index.bisect,\n      index: index.index,\n      size: index.size,\n      onAdd(added, curr) {\n        const dim = this,\n          range = dim.bisect(dim.range, added.value),\n          idx = added.index,\n          lo = range[0],\n          hi = range[1],\n          n1 = idx.length;\n        let i;\n        for (i = 0; i < lo; ++i) curr[idx[i]] |= bit;\n        for (i = hi; i < n1; ++i) curr[idx[i]] |= bit;\n        return dim;\n      }\n    };\n  }\n\n  function ascending(a, b) {\n    return a == null || b == null ? NaN : a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n  }\n\n  function descending(a, b) {\n    return a == null || b == null ? NaN : b < a ? -1 : b > a ? 1 : b >= a ? 0 : NaN;\n  }\n\n  function bisector(f) {\n    let compare1, compare2, delta;\n\n    // If an accessor is specified, promote it to a comparator. In this case we\n    // can test whether the search value is (self-) comparable. We can\u2019t do this\n    // for a comparator (except for specific, known comparators) because we can\u2019t\n    // tell if the comparator is symmetric, and an asymmetric comparator can\u2019t be\n    // used to test whether a single value is comparable.\n    if (f.length !== 2) {\n      compare1 = ascending;\n      compare2 = (d, x) => ascending(f(d), x);\n      delta = (d, x) => f(d) - x;\n    } else {\n      compare1 = f === ascending || f === descending ? f : zero;\n      compare2 = f;\n      delta = f;\n    }\n    function left(a, x, lo = 0, hi = a.length) {\n      if (lo < hi) {\n        if (compare1(x, x) !== 0) return hi;\n        do {\n          const mid = lo + hi >>> 1;\n          if (compare2(a[mid], x) < 0) lo = mid + 1;else hi = mid;\n        } while (lo < hi);\n      }\n      return lo;\n    }\n    function right(a, x, lo = 0, hi = a.length) {\n      if (lo < hi) {\n        if (compare1(x, x) !== 0) return hi;\n        do {\n          const mid = lo + hi >>> 1;\n          if (compare2(a[mid], x) <= 0) lo = mid + 1;else hi = mid;\n        } while (lo < hi);\n      }\n      return lo;\n    }\n    function center(a, x, lo = 0, hi = a.length) {\n      const i = left(a, x, lo, hi - 1);\n      return i > lo && delta(a[i - 1], x) > -delta(a[i], x) ? i - 1 : i;\n    }\n    return {\n      left,\n      center,\n      right\n    };\n  }\n  function zero() {\n    return 0;\n  }\n\n  function number(x) {\n    return x === null ? NaN : +x;\n  }\n\n  const ascendingBisect = bisector(ascending);\n  const bisectRight = ascendingBisect.right;\n  const bisectLeft = ascendingBisect.left;\n  bisector(number).center;\n\n  function permute(source, keys) {\n    return Array.from(keys, key => source[key]);\n  }\n\n  /**\n   * Maintains a list of values, sorted by key.\n   */\n  function SortedIndex() {\n    let index = array32(0),\n      value = [],\n      size = 0;\n    function insert(key, data, base) {\n      if (!data.length) return [];\n      const n0 = size,\n        n1 = data.length,\n        addi = array32(n1);\n      let addv = Array(n1),\n        oldv,\n        oldi,\n        i;\n      for (i = 0; i < n1; ++i) {\n        addv[i] = key(data[i]);\n        addi[i] = i;\n      }\n      addv = sort(addv, addi);\n      if (n0) {\n        oldv = value;\n        oldi = index;\n        value = Array(n0 + n1);\n        index = array32(n0 + n1);\n        merge(base, oldv, oldi, n0, addv, addi, n1, value, index);\n      } else {\n        if (base > 0) for (i = 0; i < n1; ++i) {\n          addi[i] += base;\n        }\n        value = addv;\n        index = addi;\n      }\n      size = n0 + n1;\n      return {\n        index: addi,\n        value: addv\n      };\n    }\n    function remove(num, map) {\n      // map: index -> remove\n      const n = size;\n      let idx, i, j;\n\n      // seek forward to first removal\n      for (i = 0; !map[index[i]] && i < n; ++i);\n\n      // condense index and value arrays\n      for (j = i; i < n; ++i) {\n        if (!map[idx = index[i]]) {\n          index[j] = idx;\n          value[j] = value[i];\n          ++j;\n        }\n      }\n      size = n - num;\n    }\n    function reindex(map) {\n      for (let i = 0, n = size; i < n; ++i) {\n        index[i] = map[index[i]];\n      }\n    }\n    function bisect(range, array) {\n      let n;\n      if (array) {\n        n = array.length;\n      } else {\n        array = value;\n        n = size;\n      }\n      return [bisectLeft(array, range[0], 0, n), bisectRight(array, range[1], 0, n)];\n    }\n    return {\n      insert: insert,\n      remove: remove,\n      bisect: bisect,\n      reindex: reindex,\n      index: () => index,\n      size: () => size\n    };\n  }\n  function sort(values, index) {\n    values.sort.call(index, (a, b) => {\n      const x = values[a],\n        y = values[b];\n      return x < y ? -1 : x > y ? 1 : 0;\n    });\n    return permute(values, index);\n  }\n  function merge(base, value0, index0, n0, value1, index1, n1, value, index) {\n    let i0 = 0,\n      i1 = 0,\n      i;\n    for (i = 0; i0 < n0 && i1 < n1; ++i) {\n      if (value0[i0] < value1[i1]) {\n        value[i] = value0[i0];\n        index[i] = index0[i0++];\n      } else {\n        value[i] = value1[i1];\n        index[i] = index1[i1++] + base;\n      }\n    }\n    for (; i0 < n0; ++i0, ++i) {\n      value[i] = value0[i0];\n      index[i] = index0[i0];\n    }\n    for (; i1 < n1; ++i1, ++i) {\n      value[i] = value1[i1];\n      index[i] = index1[i1] + base;\n    }\n  }\n\n  /**\n   * An indexed multi-dimensional filter.\n   * @constructor\n   * @param {object} params - The parameters for this operator.\n   * @param {Array<function(object): *>} params.fields - An array of dimension accessors to filter.\n   * @param {Array} params.query - An array of per-dimension range queries.\n   */\n  function CrossFilter(params) {\n    vegaDataflow.Transform.call(this, Bitmaps(), params);\n    this._indices = null;\n    this._dims = null;\n  }\n  CrossFilter.Definition = {\n    'type': 'CrossFilter',\n    'metadata': {},\n    'params': [{\n      'name': 'fields',\n      'type': 'field',\n      'array': true,\n      'required': true\n    }, {\n      'name': 'query',\n      'type': 'array',\n      'array': true,\n      'required': true,\n      'content': {\n        'type': 'number',\n        'array': true,\n        'length': 2\n      }\n    }]\n  };\n  vegaUtil.inherits(CrossFilter, vegaDataflow.Transform, {\n    transform(_, pulse) {\n      if (!this._dims) {\n        return this.init(_, pulse);\n      } else {\n        var init = _.modified('fields') || _.fields.some(f => pulse.modified(f.fields));\n        return init ? this.reinit(_, pulse) : this.eval(_, pulse);\n      }\n    },\n    init(_, pulse) {\n      const fields = _.fields,\n        query = _.query,\n        indices = this._indices = {},\n        dims = this._dims = [],\n        m = query.length;\n      let i = 0,\n        key,\n        index;\n\n      // instantiate indices and dimensions\n      for (; i < m; ++i) {\n        key = fields[i].fname;\n        index = indices[key] || (indices[key] = SortedIndex());\n        dims.push(Dimension(index, i, query[i]));\n      }\n      return this.eval(_, pulse);\n    },\n    reinit(_, pulse) {\n      const output = pulse.materialize().fork(),\n        fields = _.fields,\n        query = _.query,\n        indices = this._indices,\n        dims = this._dims,\n        bits = this.value,\n        curr = bits.curr(),\n        prev = bits.prev(),\n        all = bits.all(),\n        out = output.rem = output.add,\n        mod = output.mod,\n        m = query.length,\n        adds = {};\n      let add, index, key, mods, remMap, modMap, i, n, f;\n\n      // set prev to current state\n      prev.set(curr);\n\n      // if pulse has remove tuples, process them first\n      if (pulse.rem.length) {\n        remMap = this.remove(_, pulse, output);\n      }\n\n      // if pulse has added tuples, add them to state\n      if (pulse.add.length) {\n        bits.add(pulse.add);\n      }\n\n      // if pulse has modified tuples, create an index map\n      if (pulse.mod.length) {\n        modMap = {};\n        for (mods = pulse.mod, i = 0, n = mods.length; i < n; ++i) {\n          modMap[mods[i]._index] = 1;\n        }\n      }\n\n      // re-initialize indices as needed, update curr bitmap\n      for (i = 0; i < m; ++i) {\n        f = fields[i];\n        if (!dims[i] || _.modified('fields', i) || pulse.modified(f.fields)) {\n          key = f.fname;\n          if (!(add = adds[key])) {\n            indices[key] = index = SortedIndex();\n            adds[key] = add = index.insert(f, pulse.source, 0);\n          }\n          dims[i] = Dimension(index, i, query[i]).onAdd(add, curr);\n        }\n      }\n\n      // visit each tuple\n      // if filter state changed, push index to add/rem\n      // else if in mod and passes a filter, push index to mod\n      for (i = 0, n = bits.data().length; i < n; ++i) {\n        if (remMap[i]) {\n          // skip if removed tuple\n          continue;\n        } else if (prev[i] !== curr[i]) {\n          // add if state changed\n          out.push(i);\n        } else if (modMap[i] && curr[i] !== all) {\n          // otherwise, pass mods through\n          mod.push(i);\n        }\n      }\n      bits.mask = (1 << m) - 1;\n      return output;\n    },\n    eval(_, pulse) {\n      const output = pulse.materialize().fork(),\n        m = this._dims.length;\n      let mask = 0;\n      if (pulse.rem.length) {\n        this.remove(_, pulse, output);\n        mask |= (1 << m) - 1;\n      }\n      if (_.modified('query') && !_.modified('fields')) {\n        mask |= this.update(_, pulse, output);\n      }\n      if (pulse.add.length) {\n        this.insert(_, pulse, output);\n        mask |= (1 << m) - 1;\n      }\n      if (pulse.mod.length) {\n        this.modify(pulse, output);\n        mask |= (1 << m) - 1;\n      }\n      this.value.mask = mask;\n      return output;\n    },\n    insert(_, pulse, output) {\n      const tuples = pulse.add,\n        bits = this.value,\n        dims = this._dims,\n        indices = this._indices,\n        fields = _.fields,\n        adds = {},\n        out = output.add,\n        n = bits.size() + tuples.length,\n        m = dims.length;\n      let k = bits.size(),\n        j,\n        key,\n        add;\n\n      // resize bitmaps and add tuples as needed\n      bits.resize(n, m);\n      bits.add(tuples);\n      const curr = bits.curr(),\n        prev = bits.prev(),\n        all = bits.all();\n\n      // add to dimensional indices\n      for (j = 0; j < m; ++j) {\n        key = fields[j].fname;\n        add = adds[key] || (adds[key] = indices[key].insert(fields[j], tuples, k));\n        dims[j].onAdd(add, curr);\n      }\n\n      // set previous filters, output if passes at least one filter\n      for (; k < n; ++k) {\n        prev[k] = all;\n        if (curr[k] !== all) out.push(k);\n      }\n    },\n    modify(pulse, output) {\n      const out = output.mod,\n        bits = this.value,\n        curr = bits.curr(),\n        all = bits.all(),\n        tuples = pulse.mod;\n      let i, n, k;\n      for (i = 0, n = tuples.length; i < n; ++i) {\n        k = tuples[i]._index;\n        if (curr[k] !== all) out.push(k);\n      }\n    },\n    remove(_, pulse, output) {\n      const indices = this._indices,\n        bits = this.value,\n        curr = bits.curr(),\n        prev = bits.prev(),\n        all = bits.all(),\n        map = {},\n        out = output.rem,\n        tuples = pulse.rem;\n      let i, n, k, f;\n\n      // process tuples, output if passes at least one filter\n      for (i = 0, n = tuples.length; i < n; ++i) {\n        k = tuples[i]._index;\n        map[k] = 1; // build index map\n        prev[k] = f = curr[k];\n        curr[k] = all;\n        if (f !== all) out.push(k);\n      }\n\n      // remove from dimensional indices\n      for (k in indices) {\n        indices[k].remove(n, map);\n      }\n      this.reindex(pulse, n, map);\n      return map;\n    },\n    // reindex filters and indices after propagation completes\n    reindex(pulse, num, map) {\n      const indices = this._indices,\n        bits = this.value;\n      pulse.runAfter(() => {\n        const indexMap = bits.remove(num, map);\n        for (const key in indices) indices[key].reindex(indexMap);\n      });\n    },\n    update(_, pulse, output) {\n      const dims = this._dims,\n        query = _.query,\n        stamp = pulse.stamp,\n        m = dims.length;\n      let mask = 0,\n        i,\n        q;\n\n      // survey how many queries have changed\n      output.filters = 0;\n      for (q = 0; q < m; ++q) {\n        if (_.modified('query', q)) {\n          i = q;\n          ++mask;\n        }\n      }\n      if (mask === 1) {\n        // only one query changed, use more efficient update\n        mask = dims[i].one;\n        this.incrementOne(dims[i], query[i], output.add, output.rem);\n      } else {\n        // multiple queries changed, perform full record keeping\n        for (q = 0, mask = 0; q < m; ++q) {\n          if (!_.modified('query', q)) continue;\n          mask |= dims[q].one;\n          this.incrementAll(dims[q], query[q], stamp, output.add);\n          output.rem = output.add; // duplicate add/rem for downstream resolve\n        }\n      }\n\n      return mask;\n    },\n    incrementAll(dim, query, stamp, out) {\n      const bits = this.value,\n        seen = bits.seen(),\n        curr = bits.curr(),\n        prev = bits.prev(),\n        index = dim.index(),\n        old = dim.bisect(dim.range),\n        range = dim.bisect(query),\n        lo1 = range[0],\n        hi1 = range[1],\n        lo0 = old[0],\n        hi0 = old[1],\n        one = dim.one;\n      let i, j, k;\n\n      // Fast incremental update based on previous lo index.\n      if (lo1 < lo0) {\n        for (i = lo1, j = Math.min(lo0, hi1); i < j; ++i) {\n          k = index[i];\n          if (seen[k] !== stamp) {\n            prev[k] = curr[k];\n            seen[k] = stamp;\n            out.push(k);\n          }\n          curr[k] ^= one;\n        }\n      } else if (lo1 > lo0) {\n        for (i = lo0, j = Math.min(lo1, hi0); i < j; ++i) {\n          k = index[i];\n          if (seen[k] !== stamp) {\n            prev[k] = curr[k];\n            seen[k] = stamp;\n            out.push(k);\n          }\n          curr[k] ^= one;\n        }\n      }\n\n      // Fast incremental update based on previous hi index.\n      if (hi1 > hi0) {\n        for (i = Math.max(lo1, hi0), j = hi1; i < j; ++i) {\n          k = index[i];\n          if (seen[k] !== stamp) {\n            prev[k] = curr[k];\n            seen[k] = stamp;\n            out.push(k);\n          }\n          curr[k] ^= one;\n        }\n      } else if (hi1 < hi0) {\n        for (i = Math.max(lo0, hi1), j = hi0; i < j; ++i) {\n          k = index[i];\n          if (seen[k] !== stamp) {\n            prev[k] = curr[k];\n            seen[k] = stamp;\n            out.push(k);\n          }\n          curr[k] ^= one;\n        }\n      }\n      dim.range = query.slice();\n    },\n    incrementOne(dim, query, add, rem) {\n      const bits = this.value,\n        curr = bits.curr(),\n        index = dim.index(),\n        old = dim.bisect(dim.range),\n        range = dim.bisect(query),\n        lo1 = range[0],\n        hi1 = range[1],\n        lo0 = old[0],\n        hi0 = old[1],\n        one = dim.one;\n      let i, j, k;\n\n      // Fast incremental update based on previous lo index.\n      if (lo1 < lo0) {\n        for (i = lo1, j = Math.min(lo0, hi1); i < j; ++i) {\n          k = index[i];\n          curr[k] ^= one;\n          add.push(k);\n        }\n      } else if (lo1 > lo0) {\n        for (i = lo0, j = Math.min(lo1, hi0); i < j; ++i) {\n          k = index[i];\n          curr[k] ^= one;\n          rem.push(k);\n        }\n      }\n\n      // Fast incremental update based on previous hi index.\n      if (hi1 > hi0) {\n        for (i = Math.max(lo1, hi0), j = hi1; i < j; ++i) {\n          k = index[i];\n          curr[k] ^= one;\n          add.push(k);\n        }\n      } else if (hi1 < hi0) {\n        for (i = Math.max(lo0, hi1), j = hi0; i < j; ++i) {\n          k = index[i];\n          curr[k] ^= one;\n          rem.push(k);\n        }\n      }\n      dim.range = query.slice();\n    }\n  });\n\n  /**\n   * Selectively filters tuples by resolving against a filter bitmap.\n   * Useful for processing the output of a cross-filter transform.\n   * @constructor\n   * @param {object} params - The parameters for this operator.\n   * @param {object} params.ignore - A bit mask indicating which filters to ignore.\n   * @param {object} params.filter - The per-tuple filter bitmaps. Typically this\n   *   parameter value is a reference to a {@link CrossFilter} transform.\n   */\n  function ResolveFilter(params) {\n    vegaDataflow.Transform.call(this, null, params);\n  }\n  ResolveFilter.Definition = {\n    'type': 'ResolveFilter',\n    'metadata': {},\n    'params': [{\n      'name': 'ignore',\n      'type': 'number',\n      'required': true,\n      'description': 'A bit mask indicating which filters to ignore.'\n    }, {\n      'name': 'filter',\n      'type': 'object',\n      'required': true,\n      'description': 'Per-tuple filter bitmaps from a CrossFilter transform.'\n    }]\n  };\n  vegaUtil.inherits(ResolveFilter, vegaDataflow.Transform, {\n    transform(_, pulse) {\n      const ignore = ~(_.ignore || 0),\n        // bit mask where zeros -> dims to ignore\n        bitmap = _.filter,\n        mask = bitmap.mask;\n\n      // exit early if no relevant filter changes\n      if ((mask & ignore) === 0) return pulse.StopPropagation;\n      const output = pulse.fork(pulse.ALL),\n        data = bitmap.data(),\n        curr = bitmap.curr(),\n        prev = bitmap.prev(),\n        pass = k => !(curr[k] & ignore) ? data[k] : null;\n\n      // propagate all mod tuples that pass the filter\n      output.filter(output.MOD, pass);\n\n      // determine add & rem tuples via filter functions\n      // for efficiency, we do *not* populate new arrays,\n      // instead we add filter functions applied downstream\n\n      if (!(mask & mask - 1)) {\n        // only one filter changed\n        output.filter(output.ADD, pass);\n        output.filter(output.REM, k => (curr[k] & ignore) === mask ? data[k] : null);\n      } else {\n        // multiple filters changed\n        output.filter(output.ADD, k => {\n          const c = curr[k] & ignore,\n            f = !c && c ^ prev[k] & ignore;\n          return f ? data[k] : null;\n        });\n        output.filter(output.REM, k => {\n          const c = curr[k] & ignore,\n            f = c && !(c ^ (c ^ prev[k] & ignore));\n          return f ? data[k] : null;\n        });\n      }\n\n      // add filter to source data in case of reflow...\n      return output.filter(output.SOURCE, t => pass(t._index));\n    }\n  });\n\n  exports.crossfilter = CrossFilter;\n  exports.resolvefilter = ResolveFilter;\n\n}));\n\n};"],
"names":["shadow$provide","global","require","module","exports","factory","define","amd","globalThis","self","vega","transforms","vegaDataflow","vegaUtil","Bitmaps","width","data","seen","Uint32Array","n","curr","array","prev","length","copy","constructor","set","add","i","j","t","_index","push","remove","num","map","Array","reindex","size","reset","k","all","one","clear","resize","m","Math","max","array8","array16","array32","Dimension","index","query","bit","zero","range","slice","bisect","onAdd","added","dim","value","idx","lo","hi","n1","ascending","a","b","NaN","descending","bisector","f","left","x","compare1","mid","compare2","delta","d","center","right","permute","source","keys","from","key","SortedIndex","insert","base","n0","addi","addv","sort","oldv","oldi","i0","i1","value1","bisectLeft","bisectRight","values","call","y","CrossFilter","params","Transform","_dims","_indices","ResolveFilter","Uint8Array","Uint16Array","ascendingBisect","number","Definition","inherits","transform","_","pulse","modified","fields","some","reinit","eval","init","indices","dims","fname","output","materialize","fork","bits","out","rem","mod","adds","remMap","modMap","mods","mask","update","modify","tuples","runAfter","indexMap","stamp","q","filters","incrementOne","incrementAll","old","lo1","hi1","lo0","hi0","min","ignore","bitmap","filter","StopPropagation","ALL","pass","MOD","ADD","c","REM","SOURCE","crossfilter","resolvefilter"]
}
